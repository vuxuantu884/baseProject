{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport queryString from \"querystring\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport liff from \"@line/liff/dist/lib\";\nimport { enumExternalMethod } from \"@configs\";\nimport { logout, setExternalLogin } from \"@redux\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PageLineLogin = () => {\n  _s();\n\n  //page hook\n  const dispatch = useDispatch();\n  const history = useHistory(); //page variable\n\n  const queryParams = queryString.parse(window.location.search.substring(1));\n  console.log(\"queryParams\", queryParams);\n  console.log(\"liff.getProfile()\", liff.getProfile());\n  liff.init({\n    liffId: \"1656727135-Nz6QzdKW\" // Use own liffId\n\n  });\n\n  (async () => {\n    const res = await liff.getProfile();\n    console.log(res);\n  })();\n\n  useEffect(() => {\n    if (queryParams.code) {\n      if (queryParams.state) {\n        dispatch(setExternalLogin({\n          type: enumExternalMethod.LINE,\n          isSignUp: false,\n          line: {\n            code: queryParams.code.toString(),\n            state: queryParams.state.toString()\n          }\n        })); // history.push(PATH_SIGN_IN);\n      } else {\n        dispatch(logout());\n      }\n    } else {\n      dispatch(logout());\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n\n_s(PageLineLogin, \"ttHHWC+EsJmhGbpqXwDwA2EruUw=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = PageLineLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"PageLineLogin\");","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Pages/LineLogin.tsx"],"names":["queryString","useEffect","useDispatch","useHistory","liff","enumExternalMethod","logout","setExternalLogin","PageLineLogin","dispatch","history","queryParams","parse","window","location","search","substring","console","log","getProfile","init","liffId","res","code","state","type","LINE","isSignUp","line","toString"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,aAAxB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AAEA,SAASC,kBAAT,QAAiD,UAAjD;AACA,SAASC,MAAT,EAAiBC,gBAAjB,QAAyC,QAAzC;;;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM;AAAA;;AAC/B;AACA,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAMQ,OAAO,GAAGP,UAAU,EAA1B,CAH+B,CAI/B;;AACA,QAAMQ,WAAW,GAAGX,WAAW,CAACY,KAAZ,CAAkBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,SAAvB,CAAiC,CAAjC,CAAlB,CAApB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BP,WAA3B;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCd,IAAI,CAACe,UAAL,EAAjC;AACAf,EAAAA,IAAI,CAACgB,IAAL,CAAU;AACNC,IAAAA,MAAM,EAAE,qBADF,CACyB;;AADzB,GAAV;;AAIA,GAAC,YAAY;AACT,UAAMC,GAAG,GAAG,MAAMlB,IAAI,CAACe,UAAL,EAAlB;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH,GAHD;;AAIArB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIU,WAAW,CAACY,IAAhB,EAAsB;AAClB,UAAIZ,WAAW,CAACa,KAAhB,EAAuB;AACnBf,QAAAA,QAAQ,CACJF,gBAAgB,CAAC;AACbkB,UAAAA,IAAI,EAAEpB,kBAAkB,CAACqB,IADZ;AAEbC,UAAAA,QAAQ,EAAE,KAFG;AAGbC,UAAAA,IAAI,EAAE;AACFL,YAAAA,IAAI,EAAEZ,WAAW,CAACY,IAAZ,CAAiBM,QAAjB,EADJ;AAEFL,YAAAA,KAAK,EAAEb,WAAW,CAACa,KAAZ,CAAkBK,QAAlB;AAFL;AAHO,SAAD,CADZ,CAAR,CADmB,CAWnB;AACH,OAZD,MAYO;AACHpB,QAAAA,QAAQ,CAACH,MAAM,EAAP,CAAR;AACH;AACJ,KAhBD,MAgBO;AACHG,MAAAA,QAAQ,CAACH,MAAM,EAAP,CAAR;AACH;AACJ,GApBQ,EAoBN,EApBM,CAAT;AAsBA,sBAAO,qCAAP;AACH,CAvCM;;GAAME,a;UAEQN,W,EACDC,U;;;KAHPK,a","sourcesContent":["import queryString from \"querystring\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport liff from \"@line/liff/dist/lib\";\n\nimport { enumExternalMethod, PATH_SIGN_IN } from \"@configs\";\nimport { logout, setExternalLogin } from \"@redux\";\n\nexport const PageLineLogin = () => {\n    //page hook\n    const dispatch = useDispatch();\n    const history = useHistory();\n    //page variable\n    const queryParams = queryString.parse(window.location.search.substring(1));\n    console.log(\"queryParams\", queryParams);\n    console.log(\"liff.getProfile()\", liff.getProfile());\n    liff.init({\n        liffId: \"1656727135-Nz6QzdKW\", // Use own liffId\n    });\n\n    (async () => {\n        const res = await liff.getProfile();\n        console.log(res);\n    })();\n    useEffect(() => {\n        if (queryParams.code) {\n            if (queryParams.state) {\n                dispatch(\n                    setExternalLogin({\n                        type: enumExternalMethod.LINE,\n                        isSignUp: false,\n                        line: {\n                            code: queryParams.code.toString(),\n                            state: queryParams.state.toString(),\n                        },\n                    })\n                );\n                // history.push(PATH_SIGN_IN);\n            } else {\n                dispatch(logout());\n            }\n        } else {\n            dispatch(logout());\n        }\n    }, []);\n\n    return <></>;\n};\n"]},"metadata":{},"sourceType":"module"}