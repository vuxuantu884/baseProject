{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import{useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{ComponentSignUpEmail}from\"@components\";import{useYup}from\"@validations\";import{authApi}from\"@api\";import{setAuth,setExternalLogin,setLoading}from\"@redux\";import{useNotify}from\"@utils\";import{enumExternalMethod,PATH_SIGN_UP_FROM}from\"@configs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ModuleEmailSignUp=function ModuleEmailSignUp(){//page hooks\nvar _useYup=useYup(),YubEmailSignUp=_useYup.YubEmailSignUp;var dispatch=useDispatch();var _useNotify=useNotify(),error=_useNotify.error;var history=useHistory();//page variable\nvar initialValues={email:\"\"};var registerSchema=Yup.object().shape(YubEmailSignUp);var handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setSubmitting,res,data,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref.setSubmitting;_context.prev=1;setSubmitting(true);dispatch(setLoading(true));_context.next=6;return authApi.registerEmail(values.email);case 6:res=_context.sent;data=res.data;dispatch(setAuth(data));dispatch(setExternalLogin({type:enumExternalMethod.EMAIL,isSignUp:true}));history.push(PATH_SIGN_UP_FROM);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);message=_context.t0.response.data.message;error(message);case 17:_context.prev=17;setSubmitting(false);dispatch(setLoading(false));return _context.finish(17);case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,13,17,21]]);}));return function handleRegister(_x,_x2){return _ref2.apply(this,arguments);};}();var _useFormik=useFormik({initialValues:initialValues,validationSchema:registerSchema,onSubmit:handleRegister}),values=_useFormik.values,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit,isSubmitting=_useFormik.isSubmitting,errors=_useFormik.errors,touched=_useFormik.touched;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ComponentSignUpEmail,{handleBlur:handleBlur,handleChange:handleChange,errors:errors,touched:touched,values:values,handleSubmit:handleSubmit,isSubmitting:isSubmitting})});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/email/Sign.tsx"],"names":["useFormik","Yup","useDispatch","useHistory","ComponentSignUpEmail","useYup","authApi","setAuth","setExternalLogin","setLoading","useNotify","enumExternalMethod","PATH_SIGN_UP_FROM","ModuleEmailSignUp","YubEmailSignUp","dispatch","error","history","initialValues","email","registerSchema","object","shape","handleRegister","values","setSubmitting","registerEmail","res","data","type","EMAIL","isSignUp","push","message","response","validationSchema","onSubmit","handleChange","handleBlur","handleSubmit","isSubmitting","errors","touched"],"mappings":"2UAAA,OAASA,SAAT,KAAyC,QAAzC,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,OAASC,oBAAT,KAAqC,aAArC,CAEA,OAASC,MAAT,KAAuB,cAAvB,CACA,OAASC,OAAT,KAAwB,MAAxB,CACA,OAASC,OAAT,CAAkBC,gBAAlB,CAAoCC,UAApC,KAAsD,QAAtD,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,OAASC,kBAAT,CAA6BC,iBAA7B,KAAsD,UAAtD,C,gGAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CACnC;AACA,YAA2BR,MAAM,EAAjC,CAAQS,cAAR,SAAQA,cAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CACA,eAAkBQ,SAAS,EAA3B,CAAQM,KAAR,YAAQA,KAAR,CACA,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEA;AACA,GAAMe,CAAAA,aAAqB,CAAG,CAC1BC,KAAK,CAAE,EADmB,CAA9B,CAGA,GAAMC,CAAAA,cAAc,CAAGnB,GAAG,CAACoB,MAAJ,GAAaC,KAAb,CAAmBR,cAAnB,CAAvB,CAEA,GAAMS,CAAAA,cAAc,2FAAG,iBAAOC,MAAP,0JAAyBC,aAAzB,MAAyBA,aAAzB,iBAGfA,aAAa,CAAC,IAAD,CAAb,CACAV,QAAQ,CAACN,UAAU,CAAC,IAAD,CAAX,CAAR,CAJe,sBAKGH,CAAAA,OAAO,CAACoB,aAAR,CAAsBF,MAAM,CAACL,KAA7B,CALH,QAKTQ,GALS,eAMTC,IANS,CAMFD,GAAG,CAACC,IANF,CAOfb,QAAQ,CAACR,OAAO,CAACqB,IAAD,CAAR,CAAR,CACAb,QAAQ,CAACP,gBAAgB,CAAC,CAAEqB,IAAI,CAAElB,kBAAkB,CAACmB,KAA3B,CAAkCC,QAAQ,CAAE,IAA5C,CAAD,CAAjB,CAAR,CACAd,OAAO,CAACe,IAAR,CAAapB,iBAAb,EATe,iFAWPqB,OAXO,CAWK,YAAOC,QAAP,CAAgBN,IAXrB,CAWPK,OAXO,CAYfjB,KAAK,CAACiB,OAAD,CAAL,CAZe,yBAcfR,aAAa,CAAC,KAAD,CAAb,CACAV,QAAQ,CAACN,UAAU,CAAC,KAAD,CAAX,CAAR,CAfe,sGAAH,kBAAdc,CAAAA,cAAc,iDAApB,CAkBA,eACIvB,SAAS,CAAC,CACNkB,aAAa,CAAEA,aADT,CAENiB,gBAAgB,CAAEf,cAFZ,CAGNgB,QAAQ,CAAEb,cAHJ,CAAD,CADb,CAAQC,MAAR,YAAQA,MAAR,CAAgBa,YAAhB,YAAgBA,YAAhB,CAA8BC,UAA9B,YAA8BA,UAA9B,CAA0CC,YAA1C,YAA0CA,YAA1C,CAAwDC,YAAxD,YAAwDA,YAAxD,CAAsEC,MAAtE,YAAsEA,MAAtE,CAA8EC,OAA9E,YAA8EA,OAA9E,CAMA,mBACI,sCACI,KAAC,oBAAD,EACI,UAAU,CAAEJ,UADhB,CAEI,YAAY,CAAED,YAFlB,CAGI,MAAM,CAAEI,MAHZ,CAII,OAAO,CAAEC,OAJb,CAKI,MAAM,CAAElB,MALZ,CAMI,YAAY,CAAEe,YANlB,CAOI,YAAY,CAAEC,YAPlB,EADJ,EADJ,CAaH,CAlDM","sourcesContent":["import { useFormik, FormikHelpers } from \"formik\";\nimport * as Yup from \"yup\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\n\nimport { ComponentSignUpEmail } from \"@components\";\nimport { IAuth, IEmail } from \"@interfaces\";\nimport { useYup } from \"@validations\";\nimport { authApi } from \"@api\";\nimport { setAuth, setExternalLogin, setLoading } from \"@redux\";\nimport { useNotify } from \"@utils\";\nimport { enumExternalMethod, PATH_SIGN_UP_FROM } from \"@configs\";\n\nexport const ModuleEmailSignUp = () => {\n    //page hooks\n    const { YubEmailSignUp } = useYup();\n    const dispatch = useDispatch();\n    const { error } = useNotify();\n    const history = useHistory();\n\n    //page variable\n    const initialValues: IEmail = {\n        email: \"\",\n    };\n    const registerSchema = Yup.object().shape(YubEmailSignUp);\n\n    const handleRegister = async (values: IEmail, { setSubmitting }: FormikHelpers<IEmail>) => {\n        //\n        try {\n            setSubmitting(true);\n            dispatch(setLoading(true));\n            const res = await authApi.registerEmail(values.email);\n            const data = res.data as IAuth;\n            dispatch(setAuth(data));\n            dispatch(setExternalLogin({ type: enumExternalMethod.EMAIL, isSignUp: true }));\n            history.push(PATH_SIGN_UP_FROM);\n        } catch (errors: any) {\n            const { message } = errors.response.data;\n            error(message);\n        } finally {\n            setSubmitting(false);\n            dispatch(setLoading(false));\n        }\n    };\n    const { values, handleChange, handleBlur, handleSubmit, isSubmitting, errors, touched } =\n        useFormik({\n            initialValues: initialValues,\n            validationSchema: registerSchema,\n            onSubmit: handleRegister,\n        });\n    return (\n        <>\n            <ComponentSignUpEmail\n                handleBlur={handleBlur}\n                handleChange={handleChange}\n                errors={errors}\n                touched={touched}\n                values={values}\n                handleSubmit={handleSubmit}\n                isSubmitting={isSubmitting}\n            />\n        </>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}