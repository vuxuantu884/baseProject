{"ast":null,"code":"import _objectSpread from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import{authApi}from\"@api\";export var login=createAsyncThunk(\"auth/login\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rejectWithValue=_ref.rejectWithValue;_context.prev=1;_context.next=4;return authApi.login(values);case 4:res=_context.sent;return _context.abrupt(\"return\",res.data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",rejectWithValue(_context.t0));case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var lineLogin=createAsyncThunk(\"auth/lineLogin\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values,_ref3){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:rejectWithValue=_ref3.rejectWithValue;_context2.prev=1;_context2.next=4;return authApi.lineLogin(values);case 4:res=_context2.sent;return _context2.abrupt(\"return\",res.data);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",rejectWithValue(_context2.t0));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var lineSignup=createAsyncThunk(\"auth/lineSignup\",/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(values,_ref5){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:rejectWithValue=_ref5.rejectWithValue;_context3.prev=1;_context3.next=4;return authApi.lineSignup(values);case 4:res=_context3.sent;return _context3.abrupt(\"return\",res.data);case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);return _context3.abrupt(\"return\",rejectWithValue(_context3.t0));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[1,8]]);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var fbLogin=createAsyncThunk(\"auth/fbLogin\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(values,_ref7){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:rejectWithValue=_ref7.rejectWithValue;_context4.prev=1;_context4.next=4;return authApi.fbLogin(values);case 4:res=_context4.sent;return _context4.abrupt(\"return\",res.data);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);return _context4.abrupt(\"return\",rejectWithValue(_context4.t0));case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function(_x7,_x8){return _ref8.apply(this,arguments);};}());export var fbSignup=createAsyncThunk(\"auth/fbSignup\",/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(values,_ref9){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:rejectWithValue=_ref9.rejectWithValue;_context5.prev=1;_context5.next=4;return authApi.fbSignup(values);case 4:res=_context5.sent;return _context5.abrupt(\"return\",res.data);case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](1);return _context5.abrupt(\"return\",rejectWithValue(_context5.t0));case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[1,8]]);}));return function(_x9,_x10){return _ref10.apply(this,arguments);};}());export var ggLogin=createAsyncThunk(\"auth/google-signin\",/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(values,_ref11){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:rejectWithValue=_ref11.rejectWithValue;_context6.prev=1;_context6.next=4;return authApi.ggLogin(values);case 4:res=_context6.sent;return _context6.abrupt(\"return\",res.data);case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](1);return _context6.abrupt(\"return\",rejectWithValue(_context6.t0));case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[1,8]]);}));return function(_x11,_x12){return _ref12.apply(this,arguments);};}());export var ggSignup=createAsyncThunk(\"auth/google-signup\",/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(values,_ref13){var rejectWithValue,res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:rejectWithValue=_ref13.rejectWithValue;_context7.prev=1;_context7.next=4;return authApi.ggSignup(values);case 4:res=_context7.sent;return _context7.abrupt(\"return\",res.data);case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](1);return _context7.abrupt(\"return\",rejectWithValue(_context7.t0));case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[1,8]]);}));return function(_x13,_x14){return _ref14.apply(this,arguments);};}());export var getInfo=createAsyncThunk(\"auth/userInfo\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return authApi.getInfo();case 2:res=_context8.sent;return _context8.abrupt(\"return\",res.data);case 4:case\"end\":return _context8.stop();}}},_callee8);})));var initialState={auth:null,isRemember:false,isLoading:false,error:\"\",tokenInfoAuth:\"\",userInfo:null,externalLogin:null,merchantId:\"\",isSignUp:false,externalType:null,detailUser:false};var authSlice=createSlice({name:\"auth\",initialState:initialState,reducers:{logout:function logout(){return initialState;},setAuth:function setAuth(state,action){state.auth=action.payload;},setInfo:function setInfo(state,action){state.userInfo=_objectSpread(_objectSpread({},state.userInfo),action.payload);},setRemember:function setRemember(state,action){state.isRemember=action.payload;},setExternalLogin:function setExternalLogin(state,action){state.externalLogin=action.payload.type;state.line=action.payload.line;state.isSignUp=action.payload.isSignUp||false;state.isLoading=true;},setExternalTypes:function setExternalTypes(state,action){state.externalType=action.payload;},setMerchantID:function setMerchantID(state,action){state.merchantId=action.payload;},setDetailUser:function setDetailUser(state){state.detailUser=!state.detailUser;}},extraReducers:function extraReducers(builder){builder.addCase(login.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}if(!state.isRemember){// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\nstate.auth.refreshToken=null;}state.isLoading=false;});builder.addCase(login.pending,function(state){state.isLoading=true;});builder.addCase(login.rejected,function(state){state.auth=null;state.isLoading=false;});builder.addCase(getInfo.fulfilled,function(state,action){state.userInfo=action.payload;});builder.addCase(getInfo.rejected,function(state){state.userInfo=null;});builder.addCase(lineLogin.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(lineLogin.rejected,function(state){state.auth=null;state.externalLogin=null;state.line=null;state.isLoading=false;});builder.addCase(lineSignup.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(lineSignup.rejected,function(state){state.auth=null;state.externalLogin=null;state.line=null;state.isLoading=false;});builder.addCase(fbLogin.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(fbLogin.rejected,function(state){state.auth=null;state.externalLogin=null;state.isLoading=false;});builder.addCase(fbSignup.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(fbSignup.rejected,function(state){state.auth=null;state.externalLogin=null;state.isLoading=false;});builder.addCase(ggLogin.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(ggLogin.rejected,function(state){state.auth=null;state.externalLogin=null;state.isLoading=false;});builder.addCase(ggSignup.fulfilled,function(state,action){if(action.payload.accessToken){state.auth=action.payload;}});builder.addCase(ggSignup.rejected,function(state){state.auth=null;state.externalLogin=null;state.isLoading=false;});}});export var selectAuth=function selectAuth(state){return state.auth;};var _authSlice$actions=authSlice.actions,logout=_authSlice$actions.logout,setAuth=_authSlice$actions.setAuth,setInfo=_authSlice$actions.setInfo,setRemember=_authSlice$actions.setRemember,setExternalLogin=_authSlice$actions.setExternalLogin,setMerchantID=_authSlice$actions.setMerchantID,setExternalTypes=_authSlice$actions.setExternalTypes,setDetailUser=_authSlice$actions.setDetailUser;export{logout,setAuth,setInfo,setRemember,setExternalLogin,setMerchantID,setExternalTypes,setDetailUser};export default authSlice.reducer;","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Redux/Slices/auth.ts"],"names":["createAsyncThunk","createSlice","authApi","login","values","rejectWithValue","res","data","lineLogin","lineSignup","fbLogin","fbSignup","ggLogin","ggSignup","getInfo","initialState","auth","isRemember","isLoading","error","tokenInfoAuth","userInfo","externalLogin","merchantId","isSignUp","externalType","detailUser","authSlice","name","reducers","logout","setAuth","state","action","payload","setInfo","setRemember","setExternalLogin","type","line","setExternalTypes","setMerchantID","setDetailUser","extraReducers","builder","addCase","fulfilled","accessToken","refreshToken","pending","rejected","selectAuth","actions","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nimport {\n    IAuth,\n    IInfo,\n    ILogin,\n    ILineLogin,\n    IFBLogin,\n    IGGLogin,\n    ILineSignup,\n    IFBSignup,\n    IGGSignup,\n} from \"@interfaces\";\nimport { authApi } from \"@api\";\nimport { RootState } from \".\";\nimport { enumExternalMethod, enumTypes } from \"@configs\";\n\nexport const login = createAsyncThunk<IAuth, ILogin>(\n    \"auth/login\",\n    async (values: ILogin, { rejectWithValue }) => {\n        try {\n            const res = await authApi.login(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const lineLogin = createAsyncThunk<IAuth, ILineLogin>(\n    \"auth/lineLogin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.lineLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const lineSignup = createAsyncThunk<IAuth, ILineSignup>(\n    \"auth/lineSignup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.lineSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const fbLogin = createAsyncThunk<IAuth, IFBLogin>(\n    \"auth/fbLogin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.fbLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const fbSignup = createAsyncThunk<IAuth, IFBSignup>(\n    \"auth/fbSignup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.fbSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const ggLogin = createAsyncThunk<IAuth, IGGLogin>(\n    \"auth/google-signin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.ggLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const ggSignup = createAsyncThunk<IAuth, IGGSignup>(\n    \"auth/google-signup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.ggSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const getInfo = createAsyncThunk(\"auth/userInfo\", async () => {\n    const res = await authApi.getInfo();\n    return res.data as IInfo;\n});\n\ninterface IExternalType {\n    type: enumTypes;\n    id: string;\n}\ninterface ILine {\n    code: string | null;\n    state: string;\n}\ninterface IState {\n    auth: IAuth | null;\n    isRemember: boolean;\n    isLoading: boolean;\n    error: string;\n    tokenInfoAuth: string;\n    userInfo: IInfo | null;\n    line?: ILine | null;\n    externalLogin: enumExternalMethod | null;\n    externalType: IExternalType | null;\n    merchantId: string;\n    isSignUp: boolean;\n    detailUser: boolean;\n}\n\ninterface ISetExternalLogin {\n    line?: ILine;\n    type: enumExternalMethod;\n    isSignUp?: boolean;\n}\n\nconst initialState: IState = {\n    auth: null,\n    isRemember: false,\n    isLoading: false,\n    error: \"\",\n    tokenInfoAuth: \"\",\n    userInfo: null,\n    externalLogin: null,\n    merchantId: \"\",\n    isSignUp: false,\n    externalType: null,\n    detailUser: false,\n};\n\nconst authSlice = createSlice({\n    name: \"auth\",\n    initialState: initialState,\n    reducers: {\n        logout: () => {\n            return initialState;\n        },\n        setAuth: (state, action) => {\n            state.auth = action.payload;\n        },\n        setInfo: (state, action) => {\n            state.userInfo = { ...state.userInfo, ...action.payload };\n        },\n        setRemember: (state, action: PayloadAction<boolean>) => {\n            state.isRemember = action.payload;\n        },\n        setExternalLogin: (state, action: PayloadAction<ISetExternalLogin>) => {\n            state.externalLogin = action.payload.type;\n            state.line = action.payload.line;\n            state.isSignUp = action.payload.isSignUp || false;\n            state.isLoading = true;\n        },\n        setExternalTypes: (state, action: PayloadAction<IExternalType>) => {\n            state.externalType = action.payload;\n        },\n        setMerchantID: (state, action: PayloadAction<string>) => {\n            state.merchantId = action.payload;\n        },\n        setDetailUser: (state) => {\n            state.detailUser = !state.detailUser;\n        },\n    },\n    extraReducers: (builder) => {\n        builder.addCase(login.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n            if (!state.isRemember) {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                state.auth!.refreshToken = null;\n            }\n            state.isLoading = false;\n        });\n\n        builder.addCase(login.pending, (state) => {\n            state.isLoading = true;\n        });\n\n        builder.addCase(login.rejected, (state) => {\n            state.auth = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(getInfo.fulfilled, (state, action: { payload: IInfo }) => {\n            state.userInfo = action.payload;\n        });\n\n        builder.addCase(getInfo.rejected, (state) => {\n            state.userInfo = null;\n        });\n\n        builder.addCase(lineLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(lineLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.line = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(lineSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(lineSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.line = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(fbLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(fbLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(fbSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(fbSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(ggLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(ggLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(ggSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(ggSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n    },\n});\n\nexport const selectAuth = (state: RootState) => state.auth;\n\nexport const {\n    logout,\n    setAuth,\n    setInfo,\n    setRemember,\n    setExternalLogin,\n    setMerchantID,\n    setExternalTypes,\n    setDetailUser\n} = authSlice.actions;\n\nexport default authSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}