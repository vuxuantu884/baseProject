{"ast":null,"code":"import { __assign as e, __awaiter as t, __generator as a } from \"tslib\";\nimport { UNKNOWN as n, UNAUTHORIZED as r } from \"@liff/consts\";\nimport { createLiffError as i, HTTPStatusCodes as s } from \"@liff/util\";\nimport { getAccessToken as o } from \"@liff/store\";\n\nfunction u(e) {\n  return t(this, void 0, void 0, function () {\n    var t, r, o;\n    return a(this, function (a) {\n      switch (a.label) {\n        case 0:\n          if (!e.ok) return [3, 4];\n          a.label = 1;\n\n        case 1:\n          return a.trys.push([1, 3,, 4]), [4, e.json()];\n\n        case 2:\n          return [2, a.sent()];\n\n        case 3:\n          return a.sent(), [2, e];\n\n        case 4:\n          return t = String(e.status), r = s.has(t) ? t : n, [4, e.json().catch(function () {\n            throw i(r, e.statusText);\n          })];\n\n        case 5:\n          throw o = a.sent(), i(o.error || r, o.error_description || o.message);\n      }\n    });\n  });\n}\n\nfunction f(t) {\n  var a = function (e) {\n    if (e) return e;\n    var t = o();\n    if (!t) throw i(r, \"Need access_token for api call, Please login first\");\n    return {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\",\n      Authorization: \"Bearer \" + t\n    };\n  }(t && t.headers);\n\n  return e(e({}, t), {\n    headers: a\n  });\n}\n\nfunction c(e, t) {\n  var a;\n\n  try {\n    a = f(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n\n  return fetch(e, a).then(u);\n}\n\nfunction p(e, t) {\n  var a;\n\n  try {\n    a = f(t);\n  } catch (n) {\n    return Promise.reject(n);\n  }\n\n  return fetch(e, a);\n}\n\nfunction h(e) {\n  var t = e.subdomain;\n  return \"https://\" + (void 0 === t ? \"api\" : t) + \".line.me/\" + e.pathname;\n}\n\nvar m = {\n  token: h({\n    pathname: \"oauth2/v2.1/token\"\n  }),\n  certs: h({\n    pathname: \"oauth2/v2.1/certs\"\n  }),\n  \"openid-configuration\": h({\n    subdomain: \"access\",\n    pathname: \".well-known/openid-configuration\"\n  }),\n  authorize: h({\n    subdomain: \"access\",\n    pathname: \"liff/v1/authorize\"\n  }),\n  profile: h({\n    pathname: \"v2/profile\"\n  }),\n  message: h({\n    pathname: \"message/v3/share\"\n  }),\n  messageOTT: h({\n    pathname: \"message/v3/multisend?type=ott\"\n  }),\n  friendship: h({\n    pathname: \"friendship/v1/status\"\n  }),\n  shareTargetPicker: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker\"\n  }),\n  shareTargetPickerOtt: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  shareTargetPickerResult: h({\n    subdomain: \"access\",\n    pathname: \"oauth2/v2.1/liff/shareTargetPicker/result\"\n  }),\n  apps: h({\n    pathname: \"liff/v2/apps\"\n  }),\n  subWindowGetMSIT: h({\n    pathname: \"liff/v2/sub/msit\"\n  }),\n  subWindowGetMSTByMSIT: h({\n    pathname: \"liff/v2/sub/mst\"\n  }),\n  subWindowSubscribe: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/sub/waitResult\"\n  }),\n  subWindowPost: h({\n    pathname: \"liff/v2/sub/result\"\n  }),\n  subWindowGetAppData: h({\n    pathname: \"liff/v2/sub/appData\"\n  }),\n  subWindowGetOrigin: function (e) {\n    return h({\n      pathname: \"liff/v2/sub/\" + e + \"/origin\"\n    });\n  },\n  accessTokenVerify: h({\n    pathname: \"oauth2/v2.1/verify\"\n  }),\n  unauthorizedPermissions: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/incrementalAgreement/unauthorizedPermissions\"\n  }),\n  permanentLink: h({\n    subdomain: \"liff\",\n    pathname: \"liff/v2/permanentLink\"\n  })\n};\n\nfunction l(e) {\n  return m[e];\n}\n\nfunction v(e) {\n  return c(l(\"accessTokenVerify\") + \"?access_token=\" + encodeURIComponent(e), {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Accept: \"application/json\"\n    }\n  });\n}\n\nexport { c as fetch, l as getEndPoint, p as requestWithoutErrorHandling, v as verifyAccessToken };","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/@liff/server-api/lib/index.es.js"],"names":["__assign","e","__awaiter","t","__generator","a","UNKNOWN","n","UNAUTHORIZED","r","createLiffError","i","HTTPStatusCodes","s","getAccessToken","o","u","label","ok","trys","push","json","sent","String","status","has","catch","statusText","error","error_description","message","f","Accept","Authorization","headers","c","Promise","reject","fetch","then","p","h","subdomain","pathname","m","token","certs","authorize","profile","messageOTT","friendship","shareTargetPicker","shareTargetPickerOtt","shareTargetPickerResult","apps","subWindowGetMSIT","subWindowGetMSTByMSIT","subWindowSubscribe","subWindowPost","subWindowGetAppData","subWindowGetOrigin","accessTokenVerify","unauthorizedPermissions","permanentLink","l","v","encodeURIComponent","getEndPoint","requestWithoutErrorHandling","verifyAccessToken"],"mappings":"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","sourcesContent":["import{__assign as e,__awaiter as t,__generator as a}from\"tslib\";import{UNKNOWN as n,UNAUTHORIZED as r}from\"@liff/consts\";import{createLiffError as i,HTTPStatusCodes as s}from\"@liff/util\";import{getAccessToken as o}from\"@liff/store\";function u(e){return t(this,void 0,void 0,(function(){var t,r,o;return a(this,(function(a){switch(a.label){case 0:if(!e.ok)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.json()];case 2:return[2,a.sent()];case 3:return a.sent(),[2,e];case 4:return t=String(e.status),r=s.has(t)?t:n,[4,e.json().catch((function(){throw i(r,e.statusText)}))];case 5:throw o=a.sent(),i(o.error||r,o.error_description||o.message)}}))}))}function f(t){var a=function(e){if(e)return e;var t=o();if(!t)throw i(r,\"Need access_token for api call, Please login first\");return{\"Content-Type\":\"application/json\",Accept:\"application/json\",Authorization:\"Bearer \"+t}}(t&&t.headers);return e(e({},t),{headers:a})}function c(e,t){var a;try{a=f(t)}catch(n){return Promise.reject(n)}return fetch(e,a).then(u)}function p(e,t){var a;try{a=f(t)}catch(n){return Promise.reject(n)}return fetch(e,a)}function h(e){var t=e.subdomain;return\"https://\"+(void 0===t?\"api\":t)+\".line.me/\"+e.pathname}var m={token:h({pathname:\"oauth2/v2.1/token\"}),certs:h({pathname:\"oauth2/v2.1/certs\"}),\"openid-configuration\":h({subdomain:\"access\",pathname:\".well-known/openid-configuration\"}),authorize:h({subdomain:\"access\",pathname:\"liff/v1/authorize\"}),profile:h({pathname:\"v2/profile\"}),message:h({pathname:\"message/v3/share\"}),messageOTT:h({pathname:\"message/v3/multisend?type=ott\"}),friendship:h({pathname:\"friendship/v1/status\"}),shareTargetPicker:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker\"}),shareTargetPickerOtt:h({pathname:\"liff/v2/apps\"}),shareTargetPickerResult:h({subdomain:\"access\",pathname:\"oauth2/v2.1/liff/shareTargetPicker/result\"}),apps:h({pathname:\"liff/v2/apps\"}),subWindowGetMSIT:h({pathname:\"liff/v2/sub/msit\"}),subWindowGetMSTByMSIT:h({pathname:\"liff/v2/sub/mst\"}),subWindowSubscribe:h({subdomain:\"liff\",pathname:\"liff/v2/sub/waitResult\"}),subWindowPost:h({pathname:\"liff/v2/sub/result\"}),subWindowGetAppData:h({pathname:\"liff/v2/sub/appData\"}),subWindowGetOrigin:function(e){return h({pathname:\"liff/v2/sub/\"+e+\"/origin\"})},accessTokenVerify:h({pathname:\"oauth2/v2.1/verify\"}),unauthorizedPermissions:h({subdomain:\"liff\",pathname:\"liff/v2/incrementalAgreement/unauthorizedPermissions\"}),permanentLink:h({subdomain:\"liff\",pathname:\"liff/v2/permanentLink\"})};function l(e){return m[e]}function v(e){return c(l(\"accessTokenVerify\")+\"?access_token=\"+encodeURIComponent(e),{headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"}})}export{c as fetch,l as getEndPoint,p as requestWithoutErrorHandling,v as verifyAccessToken};\n"]},"metadata":{},"sourceType":"module"}