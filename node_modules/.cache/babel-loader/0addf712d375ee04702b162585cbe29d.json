{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{rewardApi}from\"@api\";import{ComponentRewardList}from\"@components\";import{setLoading}from\"@redux\";import{REWARD}from\"@configs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ModulesReward=function ModulesReward(){var dispatch=useDispatch();var history=useHistory();//page state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),reward=_useState2[0],setReward=_useState2[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data,points,pointsSet,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setLoading(true));_context.next=3;return rewardApi.getListReward();case 3:res=_context.sent;data=res.data.docs;//WHAT: xu ly data thanh IData\npoints=data.map(function(item){return item.point;});pointsSet=Array.from(new Set(points));result=pointsSet.map(function(item){var res=data.filter(function(values){return values.point===item;});return{point:item,reward:res};});result.sort(function(firstEl,secondEl){if(secondEl.point>firstEl.point){return-1;}else{return 0;}});setReward(result);// setReward(data);\ndispatch(setLoading(false));case 11:case\"end\":return _context.stop();}}},_callee);}))();},[]);var handleClick=function handleClick(value){var _value$levelIds;if((_value$levelIds=value.levelIds)===null||_value$levelIds===void 0?void 0:_value$levelIds.length)return;history.push(REWARD+\"/\"+value._id);//\n};return/*#__PURE__*/_jsx(_Fragment,{children:reward&&/*#__PURE__*/_jsx(ComponentRewardList,{data:reward,handleClick:handleClick})});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/Reward.tsx"],"names":["useEffect","useState","useDispatch","useHistory","rewardApi","ComponentRewardList","setLoading","REWARD","ModulesReward","dispatch","history","reward","setReward","getListReward","res","data","docs","points","map","item","point","pointsSet","Array","from","Set","result","filter","values","sort","firstEl","secondEl","handleClick","value","levelIds","length","push","_id"],"mappings":"kfAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,OAASC,SAAT,KAA0B,MAA1B,CACA,OAASC,mBAAT,KAAoC,aAApC,CAEA,OAASC,UAAT,KAA2B,QAA3B,CACA,OAASC,MAAT,KAAuB,UAAvB,C,gGAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC/B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CACA;AACA,cAA4BF,QAAQ,CAAgB,EAAhB,CAApC,wCAAOU,MAAP,eAAeC,SAAf,eAEAZ,SAAS,CAAC,UAAM,CACZ,wDAAC,wKACGS,QAAQ,CAACH,UAAU,CAAC,IAAD,CAAX,CAAR,CADH,sBAEqBF,CAAAA,SAAS,CAACS,aAAV,EAFrB,QAESC,GAFT,eAGSC,IAHT,CAGgBD,GAAG,CAACC,IAAJ,CAASC,IAHzB,CAIG;AACMC,MALT,CAKkBF,IAAI,CAACG,GAAL,CAAS,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,KAAf,EAAT,CALlB,CAMSC,SANT,CAMqBC,KAAK,CAACC,IAAN,CAAW,GAAIC,CAAAA,GAAJ,CAAQP,MAAR,CAAX,CANrB,CAOSQ,MAPT,CAOkBJ,SAAS,CAACH,GAAV,CAAc,SAACC,IAAD,CAAU,CACnC,GAAML,CAAAA,GAAG,CAAGC,IAAI,CAACW,MAAL,CAAY,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAACP,KAAP,GAAiBD,IAA7B,EAAZ,CAAZ,CACA,MAAO,CACHC,KAAK,CAAED,IADJ,CAEHR,MAAM,CAAEG,GAFL,CAAP,CAIH,CANc,CAPlB,CAcGW,MAAM,CAACG,IAAP,CAAY,SAACC,OAAD,CAAUC,QAAV,CAAuB,CAC/B,GAAIA,QAAQ,CAACV,KAAT,CAAiBS,OAAO,CAACT,KAA7B,CAAoC,CAChC,MAAO,CAAC,CAAR,CACH,CAFD,IAEO,CACH,MAAO,EAAP,CACH,CACJ,CAND,EAOAR,SAAS,CAACa,MAAD,CAAT,CACA;AACAhB,QAAQ,CAACH,UAAU,CAAC,KAAD,CAAX,CAAR,CAvBH,uDAAD,KAyBH,CA1BQ,CA0BN,EA1BM,CAAT,CA4BA,GAAMyB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAoB,qBACpC,oBAAIA,KAAK,CAACC,QAAV,0CAAI,gBAAgBC,MAApB,CAA4B,OAC5BxB,OAAO,CAACyB,IAAR,CAAa5B,MAAM,CAAG,GAAT,CAAeyB,KAAK,CAACI,GAAlC,EACA;AACH,CAJD,CAMA,mBAAO,yBAAGzB,MAAM,eAAI,KAAC,mBAAD,EAAqB,IAAI,CAAEA,MAA3B,CAAmC,WAAW,CAAEoB,WAAhD,EAAb,EAAP,CACH,CAzCM","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\n\nimport { rewardApi } from \"@api\";\nimport { ComponentRewardList } from \"@components\";\nimport { IReward, IDataReward } from \"@interfaces\";\nimport { setLoading } from \"@redux\";\nimport { REWARD } from \"@configs\";\n\nexport const ModulesReward = () => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    //page state\n    const [reward, setReward] = useState<IDataReward[]>([]);\n\n    useEffect(() => {\n        (async () => {\n            dispatch(setLoading(true));\n            const res = await rewardApi.getListReward();\n            const data = res.data.docs as IReward[];\n            //WHAT: xu ly data thanh IData\n            const points = data.map((item) => item.point) as number[];\n            const pointsSet = Array.from(new Set(points));\n            const result = pointsSet.map((item) => {\n                const res = data.filter((values) => values.point === item);\n                return {\n                    point: item,\n                    reward: res,\n                };\n            });\n            result.sort((firstEl, secondEl) => {\n                if (secondEl.point > firstEl.point) {\n                    return -1;\n                } else {\n                    return 0;\n                }\n            });\n            setReward(result);\n            // setReward(data);\n            dispatch(setLoading(false));\n        })();\n    }, []);\n\n    const handleClick = (value: IReward) => {\n        if (value.levelIds?.length) return;\n        history.push(REWARD + \"/\" + value._id);\n        //\n    };\n\n    return <>{reward && <ComponentRewardList data={reward} handleClick={handleClick} />}</>;\n};\n"]},"metadata":{},"sourceType":"module"}