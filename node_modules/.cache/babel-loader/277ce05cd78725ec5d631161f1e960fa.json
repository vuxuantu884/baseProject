{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useFormik}from\"formik\";import{useDispatch}from\"react-redux\";import{useState}from\"react\";import{useTranslation}from\"react-i18next\";import{useHistory}from\"react-router\";import{ComponentSignUpTel}from\"@components\";import{authApi}from\"@api\";import{setExternalLogin,setLoading}from\"@redux\";import{useNotify}from\"@utils\";import{enumExternalMethod,PATH_OTP}from\"@configs\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ModuleTelSignUp=function ModuleTelSignUp(){//page hooks\nvar dispatch=useDispatch();var _useNotify=useNotify(),error=_useNotify.error,success=_useNotify.success;var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//page state\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),errorPhone=_useState2[0],setError=_useState2[1];//page variable\nvar initialValues={phoneNumber:\"\"};var handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setSubmitting,res,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref.setSubmitting;if(!errorPhone){_context.next=3;break;}return _context.abrupt(\"return\");case 3:if(values.phoneNumber){_context.next=6;break;}setError(t(\"validation.isNumber\"));return _context.abrupt(\"return\");case 6:_context.prev=6;setSubmitting(true);dispatch(setLoading(true));_context.next=11;return authApi.registerPhone({phoneNumber:values.phone||\"\"});case 11:res=_context.sent;if(res.data.message){dispatch(setExternalLogin({type:enumExternalMethod.TEL,isSignUp:true}));success(res.data.message);window.sessionStorage.setItem(\"phoneNumber\",(values===null||values===void 0?void 0:values.phone)||\"\");history.push(PATH_OTP);}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](6);message=_context.t0.response.data.message;error(message);case 19:_context.prev=19;setSubmitting(false);dispatch(setLoading(false));return _context.finish(19);case 23:case\"end\":return _context.stop();}}},_callee,null,[[6,15,19,23]]);}));return function handleRegister(_x,_x2){return _ref2.apply(this,arguments);};}();var _useFormik=useFormik({initialValues:initialValues,onSubmit:handleRegister}),values=_useFormik.values,handleSubmit=_useFormik.handleSubmit,isSubmitting=_useFormik.isSubmitting,setFieldTouched=_useFormik.setFieldTouched,setFieldValue=_useFormik.setFieldValue;return/*#__PURE__*/_jsx(ComponentSignUpTel,{values:values,handleSubmit:handleSubmit,isSubmitting:isSubmitting,setFieldTouched:setFieldTouched,setFieldValue:setFieldValue,errorPhone:errorPhone||\"\",setError:setError});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/tel/SignUp.tsx"],"names":["useFormik","useDispatch","useState","useTranslation","useHistory","ComponentSignUpTel","authApi","setExternalLogin","setLoading","useNotify","enumExternalMethod","PATH_OTP","ModuleTelSignUp","dispatch","error","success","t","history","errorPhone","setError","initialValues","phoneNumber","handleRegister","values","setSubmitting","registerPhone","phone","res","data","message","type","TEL","isSignUp","window","sessionStorage","setItem","push","response","onSubmit","handleSubmit","isSubmitting","setFieldTouched","setFieldValue"],"mappings":"kfAAA,OAASA,SAAT,KAAyC,QAAzC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,cAAT,KAA+B,eAA/B,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,OAASC,kBAAT,KAAmC,aAAnC,CAEA,OAASC,OAAT,KAAwB,MAAxB,CACA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,QAA7C,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,OAASC,kBAAT,CAA6BC,QAA7B,KAA6C,UAA7C,C,2CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACjC;AACA,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,eAA2BQ,SAAS,EAApC,CAAQK,KAAR,YAAQA,KAAR,CAAeC,OAAf,YAAeA,OAAf,CACA,oBAAcZ,cAAc,EAA5B,CAAQa,CAAR,iBAAQA,CAAR,CACA,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CACA;AACA,cAA+BF,QAAQ,EAAvC,wCAAOgB,UAAP,eAAmBC,QAAnB,eAEA;AACA,GAAMC,CAAAA,aAAqB,CAAG,CAC1BC,WAAW,CAAE,EADa,CAA9B,CAIA,GAAMC,CAAAA,cAAc,2FAAG,iBAAOC,MAAP,qJAAyBC,aAAzB,MAAyBA,aAAzB,KACfN,UADe,oEAEdK,MAAM,CAACF,WAFO,yBAGfF,QAAQ,CAACH,CAAC,CAAC,qBAAD,CAAF,CAAR,CAHe,wDAQfQ,aAAa,CAAC,IAAD,CAAb,CACAX,QAAQ,CAACL,UAAU,CAAC,IAAD,CAAX,CAAR,CATe,uBAUGF,CAAAA,OAAO,CAACmB,aAAR,CAAsB,CACpCJ,WAAW,CAAEE,MAAM,CAACG,KAAP,EAAgB,EADO,CAAtB,CAVH,SAUTC,GAVS,eAaf,GAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,CAAsB,CAClBhB,QAAQ,CAACN,gBAAgB,CAAC,CAAEuB,IAAI,CAAEpB,kBAAkB,CAACqB,GAA3B,CAAgCC,QAAQ,CAAE,IAA1C,CAAD,CAAjB,CAAR,CACAjB,OAAO,CAACY,GAAG,CAACC,IAAJ,CAASC,OAAV,CAAP,CACAI,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,aAA9B,CAA6C,CAAAZ,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEG,KAAR,GAAiB,EAA9D,EACAT,OAAO,CAACmB,IAAR,CAAazB,QAAb,EACH,CAlBc,iFAoBPkB,OApBO,CAoBK,YAAOQ,QAAP,CAAgBT,IApBrB,CAoBPC,OApBO,CAqBff,KAAK,CAACe,OAAD,CAAL,CArBe,yBAuBfL,aAAa,CAAC,KAAD,CAAb,CACAX,QAAQ,CAACL,UAAU,CAAC,KAAD,CAAX,CAAR,CAxBe,sGAAH,kBAAdc,CAAAA,cAAc,iDAApB,CA4BA,eAA+EtB,SAAS,CAAC,CACrFoB,aAAa,CAAEA,aADsE,CAErFkB,QAAQ,CAAEhB,cAF2E,CAAD,CAAxF,CAAQC,MAAR,YAAQA,MAAR,CAAgBgB,YAAhB,YAAgBA,YAAhB,CAA8BC,YAA9B,YAA8BA,YAA9B,CAA4CC,eAA5C,YAA4CA,eAA5C,CAA6DC,aAA7D,YAA6DA,aAA7D,CAKA,mBACI,KAAC,kBAAD,EACI,MAAM,CAAEnB,MADZ,CAEI,YAAY,CAAEgB,YAFlB,CAGI,YAAY,CAAEC,YAHlB,CAII,eAAe,CAAEC,eAJrB,CAKI,aAAa,CAAEC,aALnB,CAMI,UAAU,CAAExB,UAAU,EAAI,EAN9B,CAOI,QAAQ,CAAEC,QAPd,EADJ,CAWH,CA1DM","sourcesContent":["import { useFormik, FormikHelpers } from \"formik\";\nimport { useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from \"react-router\";\n\nimport { ComponentSignUpTel } from \"@components\";\nimport { IPhone } from \"@interfaces\";\nimport { authApi } from \"@api\";\nimport { setExternalLogin, setLoading } from \"@redux\";\nimport { useNotify } from \"@utils\";\nimport { enumExternalMethod, PATH_OTP } from \"@configs\";\n\nexport const ModuleTelSignUp = () => {\n    //page hooks\n    const dispatch = useDispatch();\n    const { error, success } = useNotify();\n    const { t } = useTranslation();\n    const history = useHistory();\n    //page state\n    const [errorPhone, setError] = useState<string>();\n\n    //page variable\n    const initialValues: IPhone = {\n        phoneNumber: \"\",\n    };\n\n    const handleRegister = async (values: IPhone, { setSubmitting }: FormikHelpers<IPhone>) => {\n        if (errorPhone) return;\n        if (!values.phoneNumber) {\n            setError(t(\"validation.isNumber\"));\n            return;\n        }\n\n        try {\n            setSubmitting(true);\n            dispatch(setLoading(true));\n            const res = await authApi.registerPhone({\n                phoneNumber: values.phone || \"\",\n            });\n            if (res.data.message) {\n                dispatch(setExternalLogin({ type: enumExternalMethod.TEL, isSignUp: true }));\n                success(res.data.message);\n                window.sessionStorage.setItem(\"phoneNumber\", values?.phone || \"\");\n                history.push(PATH_OTP);\n            }\n        } catch (errors: any) {\n            const { message } = errors.response.data;\n            error(message);\n        } finally {\n            setSubmitting(false);\n            dispatch(setLoading(false));\n        }\n    };\n\n    const { values, handleSubmit, isSubmitting, setFieldTouched, setFieldValue } = useFormik({\n        initialValues: initialValues,\n        onSubmit: handleRegister,\n    });\n\n    return (\n        <ComponentSignUpTel\n            values={values}\n            handleSubmit={handleSubmit}\n            isSubmitting={isSubmitting}\n            setFieldTouched={setFieldTouched}\n            setFieldValue={setFieldValue}\n            errorPhone={errorPhone || \"\"}\n            setError={setError}\n        />\n    );\n};\n"]},"metadata":{},"sourceType":"module"}