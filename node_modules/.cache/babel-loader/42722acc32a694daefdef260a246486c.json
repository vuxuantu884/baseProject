{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useDispatch}from\"react-redux\";import{useEffect,useState}from\"react\";import{setLoading}from\"@redux\";import{historyApi}from\"@api\";import{enumTypes,INITIAL_LIST_PARAMS}from\"@configs\";import{ComponentHistoryList}from\"@components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ModuleHistory=function ModuleHistory(){//page hooks\nvar dispatch=useDispatch();//page state\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),histories=_useState2[0],setHistories=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadingPagination=_useState4[0],setLoadingPagination=_useState4[1];var _useState5=useState(INITIAL_LIST_PARAMS),_useState6=_slicedToArray(_useState5,2),param=_useState6[0],setParam=_useState6[1];useEffect(function(){handleGetData(param);},[]);var handleGetData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(param){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setLoading(true));_context.next=3;return historyApi.getListHistory(param);case 3:res=_context.sent;data=res.data.docs.map(function(item){if(item.type===enumTypes.REWARD){return _objectSpread({exchangedType:item.exchangedType,idCart:item._id,updatedAtHistory:item.updatedAt,quantityPoint:item.quantity},item.reward);}else if(item.type===enumTypes.BENEFIT){return _objectSpread({exchangedType:item.exchangedType,idCart:item._id,updatedAtHistory:item.updatedAt},item.reward);}else if(item.type===enumTypes.COUPON||item.type===enumTypes.FREE_POINT){return _objectSpread({exchangedType:item.exchangedType,idCart:item._id,updatedAtHistory:item.updatedAt},item.qrtable);}});setHistories([].concat(_toConsumableArray(histories),_toConsumableArray(data)));dispatch(setLoading(false));case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleGetData(_x){return _ref.apply(this,arguments);};}();var handleLoadMore=function handleLoadMore(){var paramFake=_objectSpread(_objectSpread({},param),{},{page:(param.page||1)+1});setParam(paramFake);setLoadingPagination(true);handleGetData(paramFake);setLoadingPagination(false);};return/*#__PURE__*/_jsx(_Fragment,{children:histories.length!==0&&/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(ComponentHistoryList,{data:histories,loadingPagination:loadingPagination,handleLoadMore:handleLoadMore}),\" \"]})});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/History.tsx"],"names":["useDispatch","useEffect","useState","setLoading","historyApi","enumTypes","INITIAL_LIST_PARAMS","ComponentHistoryList","ModuleHistory","dispatch","histories","setHistories","loadingPagination","setLoadingPagination","param","setParam","handleGetData","getListHistory","res","data","docs","map","item","type","REWARD","exchangedType","idCart","_id","updatedAtHistory","updatedAt","quantityPoint","quantity","reward","BENEFIT","COUPON","FREE_POINT","qrtable","handleLoadMore","paramFake","page","length"],"mappings":"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","sourcesContent":["import { useDispatch } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\n\nimport { setLoading } from \"@redux\";\nimport { historyApi } from \"@api\";\nimport { IBenefit, ICoupon, IFreePoint, IPagination, IReward } from \"@interfaces\";\nimport { enumTypes, INITIAL_LIST_PARAMS } from \"@configs\";\nimport { ComponentHistoryList } from \"@components\";\n\nexport const ModuleHistory = () => {\n    //page hooks\n    const dispatch = useDispatch();\n    //page state\n    const [histories, setHistories] = useState<(IBenefit | IReward | ICoupon | IFreePoint)[]>([]);\n    const [loadingPagination, setLoadingPagination] = useState<boolean>(false);\n    const [param, setParam] = useState<IPagination>(INITIAL_LIST_PARAMS);\n\n    useEffect(() => {\n        handleGetData(param);\n    }, []);\n\n    const handleGetData = async (param: IPagination) => {\n        dispatch(setLoading(true));\n        const res = await historyApi.getListHistory(param);\n        const data = res.data.docs.map((item: any) => {\n            if (item.type === enumTypes.REWARD) {\n                return {\n                    exchangedType: item.exchangedType,\n                    idCart: item._id,\n                    updatedAtHistory: item.updatedAt,\n                    quantityPoint: item.quantity,\n                    ...item.reward,\n                };\n            } else if (item.type === enumTypes.BENEFIT) {\n                return {\n                    exchangedType: item.exchangedType,\n                    idCart: item._id,\n                    updatedAtHistory: item.updatedAt,\n                    ...item.reward,\n                };\n            } else if (item.type === enumTypes.COUPON || item.type === enumTypes.FREE_POINT) {\n                return {\n                    exchangedType: item.exchangedType,\n                    idCart: item._id,\n                    updatedAtHistory: item.updatedAt,\n                    ...item.qrtable,\n                };\n            }\n        }) as (IBenefit | IReward | ICoupon | IFreePoint)[];\n        setHistories([...histories, ...data]);\n        dispatch(setLoading(false));\n    };\n\n    const handleLoadMore = () => {\n        const paramFake = {\n            ...param,\n            page: (param.page || 1) + 1,\n        };\n        setParam(paramFake);\n        setLoadingPagination(true);\n        handleGetData(paramFake);\n        setLoadingPagination(false);\n    };\n\n    return (\n        <>\n            {histories.length !== 0 && (\n                <>\n                    {\" \"}\n                    <ComponentHistoryList\n                        data={histories}\n                        loadingPagination={loadingPagination}\n                        handleLoadMore={handleLoadMore}\n                    />{\" \"}\n                </>\n            )}\n        </>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}