{"ast":null,"code":"var _jsxFileName = \"/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Google.tsx\",\n    _s = $RefreshSig$();\n\nimport { memo, useCallback } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\nimport { ComponentGoogleButton } from \"@components\";\nimport { ggLogin, ggSignup, logout, setExternalLogin } from \"@redux\";\nimport { enumExternalAuthType, enumExternalMethod } from \"@configs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModuleGoogle = /*#__PURE__*/memo(_c = _s(props => {\n  _s();\n\n  //hooks\n  const dispatch = useDispatch();\n  const {\n    t\n  } = useTranslation();\n\n  const handleGGSuccess = async response => {\n    const accessToken = response === null || response === void 0 ? void 0 : response.accessToken;\n\n    if (!accessToken) {\n      // dispatch(\n      //     openToast({\n      //         message: t(\"page.auth.login_failed\"),\n      //         type: \"error\",\n      //         autoHideDuration: 2000,\n      //     })\n      // );\n      dispatch(logout());\n    }\n\n    try {\n      let response;\n\n      if (props.state.type === enumExternalAuthType.LOGIN) {\n        const ggLoginData = {\n          token: accessToken\n        };\n        response = await dispatch(ggLogin(ggLoginData)); //WHAT: wrap function in create async thunk\n        //@ts-ignore\n\n        unwrapResult(response);\n      } else if (props.state.type === enumExternalAuthType.SIGNUP) {\n        const ggSignupData = {\n          token: accessToken,\n          inviteId: props.state.inviteId\n        };\n        response = await dispatch(ggSignup(ggSignupData)); //WHAT: wrap function in create async thunk\n        //@ts-ignore\n\n        unwrapResult(response);\n      } //@ts-ignore\n\n\n      if (!response.payload.accessToken) {// dispatch(\n        //     openToast({\n        //         message: t(\"page.auth.email_password_correct\"),\n        //         type: \"error\",\n        //         autoHideDuration: 2000,\n        //     })\n        // );\n      } else {// dispatch(\n        //     openToast({\n        //         message: t(\"page.auth.login_successfully\"),\n        //         type: \"success\",\n        //         autoHideDuration: 2000,\n        //     })\n        // );\n      }\n    } catch (error) {\n      props.errorHandler(error);\n    }\n  };\n\n  const handleGGFail = () => {\n    dispatch(logout());\n  };\n\n  const handleOnClick = useCallback(() => {\n    dispatch(setExternalLogin({\n      type: enumExternalMethod.GOOGLE\n    }));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(GoogleLogin, {\n    clientId: process.env.REACT_APP_GOOGLE_ID || \"918086977464-i1t2r5gpv27chedpe4jv9raihno46qgt.apps.googleusercontent.com\",\n    render: renderProps => /*#__PURE__*/_jsxDEV(ComponentGoogleButton, {\n      onClick: renderProps.onClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 38\n    }, this),\n    onSuccess: handleGGSuccess,\n    onFailure: handleGGFail,\n    cookiePolicy: \"single_host_origin\",\n    onRequest: handleOnClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}, \"2w1vP0r5AlpFXQToErS4DqWrFDM=\", false, function () {\n  return [useDispatch, useTranslation];\n}));\n_c2 = ModuleGoogle;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ModuleGoogle$memo\");\n$RefreshReg$(_c2, \"ModuleGoogle\");","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Google.tsx"],"names":["memo","useCallback","GoogleLogin","useDispatch","useTranslation","unwrapResult","ComponentGoogleButton","ggLogin","ggSignup","logout","setExternalLogin","enumExternalAuthType","enumExternalMethod","ModuleGoogle","props","dispatch","t","handleGGSuccess","response","accessToken","state","type","LOGIN","ggLoginData","token","SIGNUP","ggSignupData","inviteId","payload","error","errorHandler","handleGGFail","handleOnClick","GOOGLE","process","env","REACT_APP_GOOGLE_ID","renderProps","onClick"],"mappings":"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","sourcesContent":["import { memo, useCallback } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\n\nimport { ComponentGoogleButton } from \"@components\";\nimport { ggLogin, ggSignup, logout, setExternalLogin } from \"@redux\";\nimport { IExternalAuthState, IGGLogin, IGGSignup } from \"@interfaces\";\nimport { enumExternalAuthType, enumExternalMethod } from \"@configs\";\n\ninterface IProps {\n    errorHandler: (error: any) => void;\n    state: IExternalAuthState;\n}\n\nexport const ModuleGoogle = memo((props: IProps) => {\n    //hooks\n    const dispatch = useDispatch();\n    const { t } = useTranslation();\n\n    const handleGGSuccess = async (response: any) => {\n        const accessToken = response?.accessToken;\n        if (!accessToken) {\n            // dispatch(\n            //     openToast({\n            //         message: t(\"page.auth.login_failed\"),\n            //         type: \"error\",\n            //         autoHideDuration: 2000,\n            //     })\n            // );\n\n            dispatch(logout());\n        }\n\n        try {\n            let response;\n            if (props.state.type === enumExternalAuthType.LOGIN) {\n                const ggLoginData: IGGLogin = {\n                    token: accessToken,\n                };\n                response = await dispatch(ggLogin(ggLoginData));\n                //WHAT: wrap function in create async thunk\n                //@ts-ignore\n                unwrapResult(response);\n            } else if (props.state.type === enumExternalAuthType.SIGNUP) {\n                const ggSignupData: IGGSignup = {\n                    token: accessToken,\n                    inviteId: props.state.inviteId,\n                };\n                response = await dispatch(ggSignup(ggSignupData));\n                //WHAT: wrap function in create async thunk\n                //@ts-ignore\n                unwrapResult(response);\n            }\n\n            //@ts-ignore\n            if (!response.payload.accessToken) {\n                // dispatch(\n                //     openToast({\n                //         message: t(\"page.auth.email_password_correct\"),\n                //         type: \"error\",\n                //         autoHideDuration: 2000,\n                //     })\n                // );\n            } else {\n                // dispatch(\n                //     openToast({\n                //         message: t(\"page.auth.login_successfully\"),\n                //         type: \"success\",\n                //         autoHideDuration: 2000,\n                //     })\n                // );\n            }\n        } catch (error) {\n            props.errorHandler(error);\n        }\n    };\n\n    const handleGGFail = () => {\n        dispatch(logout());\n    };\n\n    const handleOnClick = useCallback(() => {\n        dispatch(setExternalLogin({ type: enumExternalMethod.GOOGLE }));\n    }, []);\n\n    return (\n        <GoogleLogin\n            clientId={\n                process.env.REACT_APP_GOOGLE_ID ||\n                \"918086977464-i1t2r5gpv27chedpe4jv9raihno46qgt.apps.googleusercontent.com\"\n            }\n            render={(renderProps) => <ComponentGoogleButton onClick={renderProps.onClick} />}\n            onSuccess={handleGGSuccess}\n            onFailure={handleGGFail}\n            cookiePolicy={\"single_host_origin\"}\n            onRequest={handleOnClick}\n        />\n    );\n});\n"]},"metadata":{},"sourceType":"module"}