{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router\";\nimport { setMainColor, setMerchant, setMerchantID, setTrafficSourceId } from \"@redux\";\nimport { merchantApi } from \"@api\";\nimport { enumStatus, PATH_404, PATH_WELCOME } from \"@configs\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PageTrafficSource = () => {\n  _s();\n\n  //page hook\n  const dispatch = useDispatch();\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  useEffect(() => {\n    merchantConfig();\n  }, []);\n\n  const merchantConfig = async () => {\n    if (id) {\n      const res = await merchantApi.getTrafficSourceId(id);\n      const data = res.data;\n\n      if (data.status !== enumStatus.ACTIVE) {\n        history.push(PATH_404);\n        return;\n      }\n\n      dispatch(setMerchantID(data.merchantId));\n      const merchantConfig = await merchantApi.getMerchantConfig();\n      const merchant = merchantConfig.data.merchant;\n      dispatch(setMerchant(merchant));\n      dispatch(setMainColor(merchant.themeColor));\n      dispatch(setTrafficSourceId(id));\n      history.push(PATH_WELCOME);\n    } else {\n      history.push(PATH_404);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n\n_s(PageTrafficSource, \"U0WG1d6005MY9IpWuPYNSa/UzxA=\", false, function () {\n  return [useDispatch, useParams, useHistory];\n});\n\n_c = PageTrafficSource;\n\nvar _c;\n\n$RefreshReg$(_c, \"PageTrafficSource\");","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Pages/TrafficSource.tsx"],"names":["useEffect","useDispatch","useHistory","useParams","setMainColor","setMerchant","setMerchantID","setTrafficSourceId","merchantApi","enumStatus","PATH_404","PATH_WELCOME","PageTrafficSource","dispatch","id","history","merchantConfig","res","getTrafficSourceId","data","status","ACTIVE","push","merchantId","getMerchantConfig","merchant","themeColor"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,cAAtC;AAEA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,aAApC,EAAmDC,kBAAnD,QAA6E,QAA7E;AACA,SAASC,WAAT,QAA4B,MAA5B;AAEA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,YAA/B,QAAmD,UAAnD;;;AAEA,OAAO,MAAMC,iBAAiB,GAAG,MAAM;AAAA;;AACnC;AACA,QAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAM;AAAEa,IAAAA;AAAF,MAASX,SAAS,EAAxB;AACA,QAAMY,OAAO,GAAGb,UAAU,EAA1B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACZgB,IAAAA,cAAc;AACjB,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMA,cAAc,GAAG,YAAY;AAC/B,QAAIF,EAAJ,EAAQ;AACJ,YAAMG,GAAG,GAAG,MAAMT,WAAW,CAACU,kBAAZ,CAA+BJ,EAA/B,CAAlB;AACA,YAAMK,IAAI,GAAGF,GAAG,CAACE,IAAjB;;AACA,UAAIA,IAAI,CAACC,MAAL,KAAgBX,UAAU,CAACY,MAA/B,EAAuC;AACnCN,QAAAA,OAAO,CAACO,IAAR,CAAaZ,QAAb;AACA;AACH;;AACDG,MAAAA,QAAQ,CAACP,aAAa,CAACa,IAAI,CAACI,UAAN,CAAd,CAAR;AACA,YAAMP,cAAc,GAAG,MAAMR,WAAW,CAACgB,iBAAZ,EAA7B;AACA,YAAMC,QAAQ,GAAGT,cAAc,CAACG,IAAf,CAAoBM,QAArC;AACAZ,MAAAA,QAAQ,CAACR,WAAW,CAACoB,QAAD,CAAZ,CAAR;AACAZ,MAAAA,QAAQ,CAACT,YAAY,CAACqB,QAAQ,CAACC,UAAV,CAAb,CAAR;AACAb,MAAAA,QAAQ,CAACN,kBAAkB,CAACO,EAAD,CAAnB,CAAR;AACAC,MAAAA,OAAO,CAACO,IAAR,CAAaX,YAAb;AACH,KAdD,MAcO;AACHI,MAAAA,OAAO,CAACO,IAAR,CAAaZ,QAAb;AACH;AACJ,GAlBD;;AAmBA,sBAAO,qCAAP;AACH,CA9BM;;GAAME,iB;UAEQX,W,EACFE,S,EACCD,U;;;KAJPU,iB","sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router\";\n\nimport { setMainColor, setMerchant, setMerchantID, setTrafficSourceId } from \"@redux\";\nimport { merchantApi } from \"@api\";\nimport { IMerchant, IMerchantQRcode } from \"@interfaces\";\nimport { enumStatus, PATH_404, PATH_WELCOME } from \"@configs\";\n\nexport const PageTrafficSource = () => {\n    //page hook\n    const dispatch = useDispatch();\n    const { id } = useParams<{ id: string }>();\n    const history = useHistory();\n\n    useEffect(() => {\n        merchantConfig();\n    }, []);\n\n    const merchantConfig = async () => {\n        if (id) {\n            const res = await merchantApi.getTrafficSourceId(id);\n            const data = res.data as IMerchantQRcode;\n            if (data.status !== enumStatus.ACTIVE) {\n                history.push(PATH_404);\n                return;\n            }\n            dispatch(setMerchantID(data.merchantId));\n            const merchantConfig = await merchantApi.getMerchantConfig();\n            const merchant = merchantConfig.data.merchant as IMerchant;\n            dispatch(setMerchant(merchant));\n            dispatch(setMainColor(merchant.themeColor));\n            dispatch(setTrafficSourceId(id));\n            history.push(PATH_WELCOME);\n        } else {\n            history.push(PATH_404);\n        }\n    };\n    return <></>;\n};\n"]},"metadata":{},"sourceType":"module"}