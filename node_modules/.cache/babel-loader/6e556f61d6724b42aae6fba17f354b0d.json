{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { authApi } from \"@api\";\nexport const login = createAsyncThunk(\"auth/login\", async (values, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n\n  try {\n    const res = await authApi.login(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const lineLogin = createAsyncThunk(\"auth/lineLogin\", async (values, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n\n  try {\n    const res = await authApi.lineLogin(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const lineSignup = createAsyncThunk(\"auth/lineSignup\", async (values, _ref3) => {\n  let {\n    rejectWithValue\n  } = _ref3;\n\n  try {\n    const res = await authApi.lineSignup(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const fbLogin = createAsyncThunk(\"auth/fbLogin\", async (values, _ref4) => {\n  let {\n    rejectWithValue\n  } = _ref4;\n\n  try {\n    const res = await authApi.fbLogin(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const fbSignup = createAsyncThunk(\"auth/fbSignup\", async (values, _ref5) => {\n  let {\n    rejectWithValue\n  } = _ref5;\n\n  try {\n    const res = await authApi.fbSignup(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const ggLogin = createAsyncThunk(\"auth/google-signin\", async (values, _ref6) => {\n  let {\n    rejectWithValue\n  } = _ref6;\n\n  try {\n    const res = await authApi.ggLogin(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const ggSignup = createAsyncThunk(\"auth/google-signup\", async (values, _ref7) => {\n  let {\n    rejectWithValue\n  } = _ref7;\n\n  try {\n    const res = await authApi.ggSignup(values);\n    return res.data;\n  } catch (err) {\n    return rejectWithValue(err);\n  }\n});\nexport const getInfo = createAsyncThunk(\"auth/userInfo\", async () => {\n  const res = await authApi.getInfo();\n  return res.data;\n});\nconst initialState = {\n  auth: null,\n  isRemember: false,\n  isLoading: false,\n  error: \"\",\n  tokenInfoAuth: \"\",\n  userInfo: null,\n  externalLogin: null,\n  merchantId: \"\",\n  isSignUp: false,\n  externalType: null\n};\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState: initialState,\n  reducers: {\n    logout: () => {\n      return initialState;\n    },\n    setAuth: (state, action) => {\n      state.auth = action.payload;\n    },\n    setInfo: (state, action) => {\n      state.userInfo = { ...state.userInfo,\n        ...action.payload\n      };\n    },\n    setRemember: (state, action) => {\n      state.isRemember = action.payload;\n    },\n    setExternalLogin: (state, action) => {\n      state.externalLogin = action.payload.type;\n      state.line = action.payload.line;\n      state.isSignUp = action.payload.isSignUp || false;\n      state.isLoading = true;\n    },\n    setExternalTypes: (state, action) => {\n      state.externalType = action.payload;\n    },\n    setMerchantID: (state, action) => {\n      state.merchantId = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(login.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n\n      if (!state.isRemember) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        state.auth.refreshToken = null;\n      }\n\n      state.isLoading = false;\n    });\n    builder.addCase(login.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(login.rejected, state => {\n      state.auth = null;\n      state.isLoading = false;\n    });\n    builder.addCase(getInfo.fulfilled, (state, action) => {\n      state.userInfo = action.payload;\n    });\n    builder.addCase(getInfo.rejected, state => {\n      state.userInfo = null;\n    });\n    builder.addCase(lineLogin.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(lineLogin.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.line = null;\n      state.isLoading = false;\n    });\n    builder.addCase(lineSignup.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(lineSignup.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.line = null;\n      state.isLoading = false;\n    });\n    builder.addCase(fbLogin.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(fbLogin.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.isLoading = false;\n    });\n    builder.addCase(fbSignup.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(fbSignup.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.isLoading = false;\n    });\n    builder.addCase(ggLogin.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(ggLogin.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.isLoading = false;\n    });\n    builder.addCase(ggSignup.fulfilled, (state, action) => {\n      if (action.payload.accessToken) {\n        state.auth = action.payload;\n      }\n    });\n    builder.addCase(ggSignup.rejected, state => {\n      state.auth = null;\n      state.externalLogin = null;\n      state.isLoading = false;\n    });\n  }\n});\nexport const selectAuth = state => state.auth;\nexport const {\n  logout,\n  setAuth,\n  setInfo,\n  setRemember,\n  setExternalLogin,\n  setMerchantID,\n  setExternalTypes\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Redux/Slices/auth.ts"],"names":["createAsyncThunk","createSlice","authApi","login","values","rejectWithValue","res","data","err","lineLogin","lineSignup","fbLogin","fbSignup","ggLogin","ggSignup","getInfo","initialState","auth","isRemember","isLoading","error","tokenInfoAuth","userInfo","externalLogin","merchantId","isSignUp","externalType","authSlice","name","reducers","logout","setAuth","state","action","payload","setInfo","setRemember","setExternalLogin","type","line","setExternalTypes","setMerchantID","extraReducers","builder","addCase","fulfilled","accessToken","refreshToken","pending","rejected","selectAuth","actions","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nimport {\n    IAuth,\n    IInfo,\n    ILogin,\n    ILineLogin,\n    IFBLogin,\n    IGGLogin,\n    ILineSignup,\n    IFBSignup,\n    IGGSignup,\n} from \"@interfaces\";\nimport { authApi } from \"@api\";\nimport { RootState } from \".\";\nimport { enumExternalMethod, enumTypes } from \"@configs\";\n\nexport const login = createAsyncThunk<IAuth, ILogin>(\n    \"auth/login\",\n    async (values: ILogin, { rejectWithValue }) => {\n        try {\n            const res = await authApi.login(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const lineLogin = createAsyncThunk<IAuth, ILineLogin>(\n    \"auth/lineLogin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.lineLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const lineSignup = createAsyncThunk<IAuth, ILineSignup>(\n    \"auth/lineSignup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.lineSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const fbLogin = createAsyncThunk<IAuth, IFBLogin>(\n    \"auth/fbLogin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.fbLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const fbSignup = createAsyncThunk<IAuth, IFBSignup>(\n    \"auth/fbSignup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.fbSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const ggLogin = createAsyncThunk<IAuth, IGGLogin>(\n    \"auth/google-signin\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.ggLogin(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const ggSignup = createAsyncThunk<IAuth, IGGSignup>(\n    \"auth/google-signup\",\n    async (values, { rejectWithValue }) => {\n        try {\n            const res = await authApi.ggSignup(values);\n            return res.data as IAuth;\n        } catch (err: any) {\n            return rejectWithValue(err);\n        }\n    }\n);\n\nexport const getInfo = createAsyncThunk(\"auth/userInfo\", async () => {\n    const res = await authApi.getInfo();\n    return res.data as IInfo;\n});\n\ninterface ILine {\n    code: string | null;\n    state: string;\n}\ninterface IState {\n    auth: IAuth | null;\n    isRemember: boolean;\n    isLoading: boolean;\n    error: string;\n    tokenInfoAuth: string;\n    userInfo: IInfo | null;\n    line?: ILine | null;\n    externalLogin: enumExternalMethod | null;\n    externalType: {\n        type:enumTypes;\n        id:string;\n    };\n    merchantId: string;\n    isSignUp: boolean;\n}\n\ninterface ISetExternalLogin {\n    line?: ILine;\n    type: enumExternalMethod;\n    isSignUp?: boolean;\n}\n\nconst initialState: IState = {\n    auth: null,\n    isRemember: false,\n    isLoading: false,\n    error: \"\",\n    tokenInfoAuth: \"\",\n    userInfo: null,\n    externalLogin: null,\n    merchantId: \"\",\n    isSignUp: false,\n    externalType: null,\n};\n\nconst authSlice = createSlice({\n    name: \"auth\",\n    initialState: initialState,\n    reducers: {\n        logout: () => {\n            return initialState;\n        },\n        setAuth: (state, action) => {\n            state.auth = action.payload;\n        },\n        setInfo: (state, action) => {\n            state.userInfo = { ...state.userInfo, ...action.payload };\n        },\n        setRemember: (state, action: PayloadAction<boolean>) => {\n            state.isRemember = action.payload;\n        },\n        setExternalLogin: (state, action: PayloadAction<ISetExternalLogin>) => {\n            state.externalLogin = action.payload.type;\n            state.line = action.payload.line;\n            state.isSignUp = action.payload.isSignUp || false;\n            state.isLoading = true;\n        },\n        setExternalTypes: (state, action: PayloadAction<enumTypes>) => {\n            state.externalType = action.payload;\n\n        },\n        setMerchantID: (state, action: PayloadAction<string>) => {\n            state.merchantId = action.payload;\n        },\n    },\n    extraReducers: (builder) => {\n        builder.addCase(login.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n            if (!state.isRemember) {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                state.auth!.refreshToken = null;\n            }\n            state.isLoading = false;\n        });\n\n        builder.addCase(login.pending, (state) => {\n            state.isLoading = true;\n        });\n\n        builder.addCase(login.rejected, (state) => {\n            state.auth = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(getInfo.fulfilled, (state, action: { payload: IInfo }) => {\n            state.userInfo = action.payload;\n        });\n\n        builder.addCase(getInfo.rejected, (state) => {\n            state.userInfo = null;\n        });\n\n        builder.addCase(lineLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(lineLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.line = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(lineSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(lineSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.line = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(fbLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(fbLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(fbSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(fbSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(ggLogin.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(ggLogin.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n\n        builder.addCase(ggSignup.fulfilled, (state, action: { payload: IAuth }) => {\n            if (action.payload.accessToken) {\n                state.auth = action.payload;\n            }\n        });\n\n        builder.addCase(ggSignup.rejected, (state) => {\n            state.auth = null;\n            state.externalLogin = null;\n            state.isLoading = false;\n        });\n    },\n});\n\nexport const selectAuth = (state: RootState) => state.auth;\n\nexport const { logout, setAuth, setInfo, setRemember, setExternalLogin, setMerchantID, setExternalTypes } =\n    authSlice.actions;\n\nexport default authSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}