{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ArrowDown,ArrowDownLeft,ArrowDownRight,ArrowLeft,ArrowRight,ArrowUp,ArrowUpLeft,ArrowUpRight}from\"react-feather\";import{Card,Col,Divider,Row,Skeleton}from\"antd\";import{useEffect,useState}from\"react\";import format from\"date-fns/format\";import{capitalize,getWeather,getWeatherIcon,windDirection}from\"@utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DescriptionItem=function DescriptionItem(_ref){var title=_ref.title,content=_ref.content;return/*#__PURE__*/_jsxs(Row,{type:\"flex\",align:\"middle\",justify:\"space-between\",className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:title}),/*#__PURE__*/_jsx(\"small\",{children:content})]});};var ForecastItem=function ForecastItem(_ref2){var content=_ref2.content;return/*#__PURE__*/_jsx(\"span\",{style:{display:\"block\"},children:content});};var getWindDirection=function getWindDirection(degree){var direction=windDirection(degree);switch(direction){case\"n\":return/*#__PURE__*/_jsx(ArrowUp,{size:20,strokeWidth:1});case\"ne\":return/*#__PURE__*/_jsx(ArrowUpRight,{size:20,strokeWidth:1});case\"e\":return/*#__PURE__*/_jsx(ArrowRight,{size:20,strokeWidth:1});case\"se\":return/*#__PURE__*/_jsx(ArrowDownRight,{size:20,strokeWidth:1});case\"s\":return/*#__PURE__*/_jsx(ArrowDown,{size:20,strokeWidth:1});case\"sw\":return/*#__PURE__*/_jsx(ArrowDownLeft,{size:20,strokeWidth:1});case\"w\":return/*#__PURE__*/_jsx(ArrowLeft,{size:20,strokeWidth:1});case\"nw\":return/*#__PURE__*/_jsx(ArrowUpLeft,{size:20,strokeWidth:1});default:break;}};export var SharedWeatherCard=function SharedWeatherCard(_ref3){var city=_ref3.city,country=_ref3.country,days=_ref3.days;var _useState=useState(),_useState2=_slicedToArray(_useState,2),current=_useState2[0],setCurrent=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),forecast=_useState4[0],setForecast=_useState4[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _forecast,_current;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getWeather(city,country,days);case 3:_forecast=_context.sent;if(_forecast){_current=_forecast.list[0];setCurrent(_current);setForecast(_forecast);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);// eslint-disable-next-line \nconsole.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}))();},[city,country,days]);return/*#__PURE__*/_jsx(Card,{bodyStyle:{padding:0},className:\"mb-4\",children:/*#__PURE__*/_jsx(Skeleton,{loading:!current&&!forecast,active:true,className:\"p-4\",children:current&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(Row,{type:\"flex\",align:\"middle\",justify:\"space-between\",className:\"mb-4\",children:[/*#__PURE__*/_jsxs(Col,{children:[forecast&&/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0 font-weight-bold\",children:\"\".concat(forecast.city.name,\", \").concat(forecast.city.country)}),/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:format(current.dt*1000,\"MMMM Do YYYY\")}),/*#__PURE__*/_jsx(\"small\",{children:capitalize(current===null||current===void 0?void 0:current.weather[0].description)})]}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-weight-light mb-0\",children:/*#__PURE__*/_jsxs(\"span\",{children:[current.main.temp,\"\\xB0\"]})})})]}),/*#__PURE__*/_jsx(Row,{type:\"flex\",align:\"middle\",justify:\"space-between\",gutter:16,children:Object.keys(current.main).map(function(key,index){return/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsx(DescriptionItem,{title:capitalize(key.replace(/_/g,\" \")),content:current.main[key]})},index);})})]}),/*#__PURE__*/_jsx(Divider,{orientation:\"left\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Forecast\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:forecast&&/*#__PURE__*/_jsx(Row,{type:\"flex\",align:\"middle\",justify:\"space-between\",className:\"text-center\",style:{flexFlow:\"initial\"},children:forecast.list.map(function(day,index){return index!==0&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mb-0\",children:[/*#__PURE__*/_jsx(ForecastItem,{content:format(day.dt*1000,\"ddd\")}),/*#__PURE__*/_jsx(ForecastItem,{content:day.weather.description}),/*#__PURE__*/_jsx(ForecastItem,{content:getWindDirection(day.wind.deg)}),/*#__PURE__*/_jsx(ForecastItem,{content:getWeatherIcon(day.weather[0].icon,50)}),/*#__PURE__*/_jsx(ForecastItem,{content:\"\".concat(day.main.temp,\"\\xB0\")})]},index);})})})]})})});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Components/shared/WeatherCard.tsx"],"names":["ArrowDown","ArrowDownLeft","ArrowDownRight","ArrowLeft","ArrowRight","ArrowUp","ArrowUpLeft","ArrowUpRight","Card","Col","Divider","Row","Skeleton","useEffect","useState","format","capitalize","getWeather","getWeatherIcon","windDirection","DescriptionItem","title","content","ForecastItem","display","getWindDirection","degree","direction","SharedWeatherCard","city","country","days","current","setCurrent","forecast","setForecast","list","console","error","padding","name","dt","weather","description","main","temp","Object","keys","map","key","index","replace","flexFlow","day","wind","deg","icon"],"mappings":"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","sourcesContent":["import {\n    ArrowDown,\n    ArrowDownLeft,\n    ArrowDownRight,\n    ArrowLeft,\n    ArrowRight,\n    ArrowUp,\n    ArrowUpLeft,\n    ArrowUpRight,\n} from \"react-feather\";\nimport { Card, Col, Divider, Row, Skeleton } from \"antd\";\nimport { useEffect, useState } from \"react\";\nimport format from \"date-fns/format\";\n\nimport { capitalize, getWeather, getWeatherIcon, windDirection } from \"@utils\";\n\nconst DescriptionItem = ({ title, content }: { title: string; content: string }) => (\n    <Row type=\"flex\" align=\"middle\" justify=\"space-between\" className=\"mb-2\">\n        <span>{title}</span>\n        <small>{content}</small>\n    </Row>\n);\n\nconst ForecastItem = ({ content }: { content: JSX.Element | undefined | string }) => (\n    <span\n        style={{\n            display: \"block\",\n        }}\n    >\n        {content}\n    </span>\n);\n\nconst getWindDirection = (degree: number) => {\n    const direction = windDirection(degree);\n    switch (direction) {\n        case \"n\":\n            return <ArrowUp size={20} strokeWidth={1} />;\n        case \"ne\":\n            return <ArrowUpRight size={20} strokeWidth={1} />;\n        case \"e\":\n            return <ArrowRight size={20} strokeWidth={1} />;\n        case \"se\":\n            return <ArrowDownRight size={20} strokeWidth={1} />;\n        case \"s\":\n            return <ArrowDown size={20} strokeWidth={1} />;\n        case \"sw\":\n            return <ArrowDownLeft size={20} strokeWidth={1} />;\n        case \"w\":\n            return <ArrowLeft size={20} strokeWidth={1} />;\n        case \"nw\":\n            return <ArrowUpLeft size={20} strokeWidth={1} />;\n        default:\n            break;\n    }\n};\n\ninterface IProps {\n    city: string;\n    country: string;\n    days: number;\n}\n\nexport const SharedWeatherCard = ({ city, country, days }: IProps) => {\n    const [current, setCurrent] = useState<any>();\n    const [forecast, setForecast] = useState<any>();\n\n    useEffect(() => {\n        (async function () {\n            try {\n                const forecast = await getWeather(city, country, days);\n\n                if (forecast) {\n                    const current = forecast.list[0];\n                    setCurrent(current);\n                    setForecast(forecast);\n                }\n            } catch (e) {\n                // eslint-disable-next-line \n                console.error(e);\n            }\n        })();\n    }, [city, country, days]);\n\n    return (\n        <Card bodyStyle={{ padding: 0 }} className=\"mb-4\">\n            <Skeleton loading={!current && !forecast} active className=\"p-4\">\n                {current && (\n                    <>\n                        <div className=\"p-4\">\n                            <Row\n                                type=\"flex\"\n                                align=\"middle\"\n                                justify=\"space-between\"\n                                className=\"mb-4\"\n                            >\n                                <Col>\n                                    {forecast && (\n                                        <h5 className=\"mb-0 font-weight-bold\">{`${forecast.city.name}, ${forecast.city.country}`}</h5>\n                                    )}\n                                    <h6 className=\"mb-0\">\n                                        {format(current.dt * 1000, \"MMMM Do YYYY\")}\n                                    </h6>\n                                    <small>{capitalize(current?.weather[0].description)}</small>\n                                </Col>\n                                <Col className=\"text-right\">\n                                    <h3 className=\"font-weight-light mb-0\">\n                                        <span>{current.main.temp}&deg;</span>\n                                    </h3>\n                                </Col>\n                            </Row>\n                            <Row type=\"flex\" align=\"middle\" justify=\"space-between\" gutter={16}>\n                                {Object.keys(current.main).map((key, index) => (\n                                    <Col xs={12} key={index}>\n                                        <DescriptionItem\n                                            title={capitalize(key.replace(/_/g, \" \"))}\n                                            content={current.main[key]}\n                                        />\n                                    </Col>\n                                ))}\n                            </Row>\n                        </div>\n                        <Divider orientation=\"left\">\n                            <small>Forecast</small>\n                        </Divider>\n                        <div className=\"p-4\">\n                            {forecast && (\n                                <Row\n                                    type=\"flex\"\n                                    align=\"middle\"\n                                    justify=\"space-between\"\n                                    className=\"text-center\"\n                                    style={{ flexFlow: \"initial\" }}\n                                >\n                                    {forecast.list.map(\n                                        (day: any, index: number) =>\n                                            index !== 0 && (\n                                                <p className=\"text-center mb-0\" key={index}>\n                                                    <ForecastItem\n                                                        content={format(day.dt * 1000, \"ddd\")}\n                                                    />\n                                                    <ForecastItem\n                                                        content={day.weather.description}\n                                                    />\n                                                    <ForecastItem\n                                                        content={getWindDirection(day.wind.deg)}\n                                                    />\n                                                    <ForecastItem\n                                                        content={getWeatherIcon(\n                                                            day.weather[0].icon,\n                                                            50\n                                                        )}\n                                                    />\n                                                    <ForecastItem content={`${day.main.temp}°`} />\n                                                </p>\n                                            )\n                                    )}\n                                </Row>\n                            )}\n                        </div>\n                    </>\n                )}\n            </Skeleton>\n        </Card>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}