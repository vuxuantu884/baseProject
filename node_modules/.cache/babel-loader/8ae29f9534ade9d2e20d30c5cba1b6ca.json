{"ast":null,"code":"import _objectSpread from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Switch}from\"react-router\";import{BrowserRouter}from\"react-router-dom\";import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{ComponentAppRoute}from\"@components\";import{routes}from\"@configs\";import{ComponentToast}from\"src/Components/Toast\";import{merchantApi}from\"@api\";import{getInfo,selectAuth,selectMerchant,setMainColor,setMerchant}from\"@redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ModuleMain=function ModuleMain(){//page hooks\nvar dispatch=useDispatch();//redux state\nvar _useSelector=useSelector(selectMerchant),_id=_useSelector._id;var _useSelector2=useSelector(selectAuth),auth=_useSelector2.auth;//page variable\nvar token=auth===null||auth===void 0?void 0:auth.accessToken;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var merchantConfig,merchant;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_id){_context.next=6;break;}_context.next=3;return merchantApi.getMerchantConfig();case 3:merchantConfig=_context.sent;merchant=merchantConfig.data.merchant;if(merchant){dispatch(setMerchant(merchant));dispatch(setMainColor(merchant.themeColor));}case 6:case\"end\":return _context.stop();}}},_callee);}))();if(token){dispatch(getInfo());}},[]);return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Switch,{children:routes.map(function(e,key){return/*#__PURE__*/_jsx(ComponentAppRoute,_objectSpread({},e),key);})}),/*#__PURE__*/_jsx(ComponentToast,{})]});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/Main.tsx"],"names":["Switch","BrowserRouter","useEffect","useDispatch","useSelector","ComponentAppRoute","routes","ComponentToast","merchantApi","getInfo","selectAuth","selectMerchant","setMainColor","setMerchant","ModuleMain","dispatch","_id","auth","token","accessToken","getMerchantConfig","merchantConfig","merchant","data","themeColor","map","e","key"],"mappings":"ifAAA,OAASA,MAAT,KAAuB,cAAvB,CACA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,OAASC,iBAAT,KAAkC,aAAlC,CACA,OAASC,MAAT,KAAuB,UAAvB,CAEA,OAASC,cAAT,KAA+B,sBAA/B,CACA,OAASC,WAAT,KAA4B,MAA5B,CACA,OAASC,OAAT,CAAkBC,UAAlB,CAA8BC,cAA9B,CAA8CC,YAA9C,CAA4DC,WAA5D,KAA+E,QAA/E,C,wFAEA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CAC5B;AACA,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA;AACA,iBAAgBC,WAAW,CAACO,cAAD,CAA3B,CAAQK,GAAR,cAAQA,GAAR,CACA,kBAAiBZ,WAAW,CAACM,UAAD,CAA5B,CAAQO,IAAR,eAAQA,IAAR,CACA;AACA,GAAMC,CAAAA,KAAK,CAAGD,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEE,WAApB,CAEAjB,SAAS,CAAC,UAAM,CACZ,wDAAC,mKACOc,GADP,+CAEoCR,CAAAA,WAAW,CAACY,iBAAZ,EAFpC,QAEaC,cAFb,eAGaC,QAHb,CAGwBD,cAAc,CAACE,IAAf,CAAoBD,QAH5C,CAIO,GAAIA,QAAJ,CAAc,CACVP,QAAQ,CAACF,WAAW,CAACS,QAAD,CAAZ,CAAR,CACAP,QAAQ,CAACH,YAAY,CAACU,QAAQ,CAACE,UAAV,CAAb,CAAR,CACH,CAPR,sDAAD,KAUA,GAAIN,KAAJ,CAAW,CACPH,QAAQ,CAACN,OAAO,EAAR,CAAR,CACH,CACJ,CAdQ,CAcN,EAdM,CAAT,CAgBA,mBACI,MAAC,aAAD,yBACI,KAAC,MAAD,WACKH,MAAM,CAACmB,GAAP,CAAW,SAACC,CAAD,CAAYC,GAAZ,qBACR,KAAC,iBAAD,kBAAiCD,CAAjC,EAAwBC,GAAxB,CADQ,EAAX,CADL,EADJ,cAMI,KAAC,cAAD,IANJ,GADJ,CAUH,CAnCM","sourcesContent":["import { Switch } from \"react-router\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { ComponentAppRoute } from \"@components\";\nimport { routes } from \"@configs\";\nimport { IMerchant, IRoute } from \"@interfaces\";\nimport { ComponentToast } from \"src/Components/Toast\";\nimport { merchantApi } from \"@api\";\nimport { getInfo, selectAuth, selectMerchant, setMainColor, setMerchant } from \"@redux\";\n\nexport const ModuleMain = () => {\n    //page hooks\n    const dispatch = useDispatch();\n    //redux state\n    const { _id } = useSelector(selectMerchant);\n    const { auth } = useSelector(selectAuth);\n    //page variable\n    const token = auth?.accessToken;\n\n    useEffect(() => {\n        (async () => {\n            if (_id) {\n                const merchantConfig = await merchantApi.getMerchantConfig();\n                const merchant = merchantConfig.data.merchant as IMerchant;\n                if (merchant) {\n                    dispatch(setMerchant(merchant));\n                    dispatch(setMainColor(merchant.themeColor));\n                }\n            }\n        })();\n        if (token) {\n            dispatch(getInfo());\n        }\n    }, []);\n\n    return (\n        <BrowserRouter>\n            <Switch>\n                {routes.map((e: IRoute, key) => (\n                    <ComponentAppRoute key={key} {...e} />\n                ))}\n            </Switch>\n            <ComponentToast />\n        </BrowserRouter>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}