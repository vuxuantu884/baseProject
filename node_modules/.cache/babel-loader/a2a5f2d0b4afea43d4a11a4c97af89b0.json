{"ast":null,"code":"import { __read as t } from \"tslib\";\nimport { INVALID_ARGUMENT as e } from \"@liff/consts\";\nimport { createLiffError as r } from \"@liff/util\";\nimport { logger as o } from \"@liff/logger\";\nvar n = {};\n\nfunction i() {\n  return n;\n}\n\nfunction s(e, r) {\n  var o = i(),\n      n = t(r.split(\".\"), 1)[0],\n      s = o[r];\n  s && e.removeEventListener(n, s), o[r] = null;\n}\n\nvar f = !1,\n    a = !1;\n\nfunction c(e, r, o, i) {\n  f || (a = function () {\n    var t = !1;\n\n    try {\n      var e = Object.defineProperty({}, \"passive\", {\n        get: function () {\n          return t = !0, !1;\n        }\n      });\n      window.addEventListener(\"test\", e, e), window.removeEventListener(\"test\", e, e);\n    } catch (r) {\n      t = !1;\n    }\n\n    return t;\n  }(), f = !0);\n  var c = t(r.split(\".\"), 1)[0];\n  return new Promise(function (t) {\n    var f = function (n) {\n      t(n), o && o(n), i && i.once && s(e, r);\n    };\n\n    !function (t, e) {\n      n[t] = e;\n    }(r, f), e.addEventListener(c, f, !!a && i);\n  });\n}\n\nfunction u(t, o, n, i) {\n  if (void 0 === n && (n = {}), \"object\" != typeof t || !t.postMessage) throw r(e, \"target must be window object\");\n  if (\"string\" != typeof o) throw r(e, \"keyname must be string\");\n  if (\"object\" != typeof n) throw r(e, \"incorrect body format. It should be Object or Array comprised of Object\");\n  if (!i) throw r(e, \"serverEndPointUrl isn't passed. please fill up with proper url\");\n  if (\"*\" === i) throw new Error(\"serverEndPointUrl doesn't allow to set '*'\");\n  var s = {\n    name: o,\n    body: n\n  };\n  t.postMessage(s, i);\n}\n\nfunction m(t, e, r, n) {\n  c(t, \"message.\" + e, function (t, e, r) {\n    return function (n) {\n      o.debug(\"messageReceive\", n), n.origin === r && n.data.name === t && e(n);\n    };\n  }(e, r, n));\n}\n\nexport { c as listen, m as messageReceive, u as messageTell, s as removeListen };","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/@liff/window-postmessage/lib/index.es.js"],"names":["__read","t","INVALID_ARGUMENT","e","createLiffError","r","logger","o","n","i","s","split","removeEventListener","f","a","c","Object","defineProperty","get","window","addEventListener","Promise","once","u","postMessage","Error","name","body","m","debug","origin","data","listen","messageReceive","messageTell","removeListen"],"mappings":"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","sourcesContent":["import{__read as t}from\"tslib\";import{INVALID_ARGUMENT as e}from\"@liff/consts\";import{createLiffError as r}from\"@liff/util\";import{logger as o}from\"@liff/logger\";var n={};function i(){return n}function s(e,r){var o=i(),n=t(r.split(\".\"),1)[0],s=o[r];s&&e.removeEventListener(n,s),o[r]=null}var f=!1,a=!1;function c(e,r,o,i){f||(a=function(){var t=!1;try{var e=Object.defineProperty({},\"passive\",{get:function(){return t=!0,!1}});window.addEventListener(\"test\",e,e),window.removeEventListener(\"test\",e,e)}catch(r){t=!1}return t}(),f=!0);var c=t(r.split(\".\"),1)[0];return new Promise((function(t){var f=function(n){t(n),o&&o(n),i&&i.once&&s(e,r)};!function(t,e){n[t]=e}(r,f),e.addEventListener(c,f,!!a&&i)}))}function u(t,o,n,i){if(void 0===n&&(n={}),\"object\"!=typeof t||!t.postMessage)throw r(e,\"target must be window object\");if(\"string\"!=typeof o)throw r(e,\"keyname must be string\");if(\"object\"!=typeof n)throw r(e,\"incorrect body format. It should be Object or Array comprised of Object\");if(!i)throw r(e,\"serverEndPointUrl isn't passed. please fill up with proper url\");if(\"*\"===i)throw new Error(\"serverEndPointUrl doesn't allow to set '*'\");var s={name:o,body:n};t.postMessage(s,i)}function m(t,e,r,n){c(t,\"message.\"+e,function(t,e,r){return function(n){o.debug(\"messageReceive\",n),n.origin===r&&n.data.name===t&&e(n)}}(e,r,n))}export{c as listen,m as messageReceive,u as messageTell,s as removeListen};\n"]},"metadata":{},"sourceType":"module"}