{"ast":null,"code":"import _regeneratorRuntime from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useFormik}from\"formik\";import{useTranslation}from\"react-i18next\";import*as Yup from\"yup\";import{useDispatch}from\"react-redux\";import{useHistory}from\"react-router\";import{ComponentPassword}from\"@components\";import{useYup}from\"@validations\";import{setLoading}from\"@redux\";import{authApi}from\"@api\";import{useNotify}from\"@utils\";import{PATH_SIGN_IN}from\"@configs\";import{jsx as _jsx}from\"react/jsx-runtime\";export var ModuleResetPassword=function ModuleResetPassword(props){//page props\nvar email=props.email,resetPasswordId=props.resetPasswordId;//page hook\nvar _useTranslation=useTranslation(),t=_useTranslation.t;var _useYup=useYup(),YubResetPassword=_useYup.YubResetPassword;var dispatch=useDispatch();var history=useHistory();var _useNotify=useNotify(),error=_useNotify.error,success=_useNotify.success;//page variable\nvar initialValues={password:\"\",conformPassword:\"\"};var registerSchema=Yup.object().shape(YubResetPassword);var handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var setSubmitting,res,errorsResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setSubmitting=_ref.setSubmitting;_context.prev=1;setSubmitting(true);dispatch(setLoading(true));_context.next=6;return authApi.resetPassword({password:values.password,email:email,resetPasswordId:resetPasswordId});case 6:res=_context.sent;if(res.data.success){success(t(\"message.reset_pass.success\"));history.push(PATH_SIGN_IN);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);errorsResponse=_context.t0.response.data.errors;if(errorsResponse){error(errorsResponse);}else{error(t(\"message.reset_pass.fail\"));}case 14:_context.prev=14;setSubmitting(false);dispatch(setLoading(false));return _context.finish(14);case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,10,14,18]]);}));return function handleRegister(_x,_x2){return _ref2.apply(this,arguments);};}();var _useFormik=useFormik({initialValues:initialValues,validationSchema:registerSchema,onSubmit:handleRegister}),values=_useFormik.values,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit,isSubmitting=_useFormik.isSubmitting,errors=_useFormik.errors,touched=_useFormik.touched;return/*#__PURE__*/_jsx(ComponentPassword,{handleBlur:handleBlur,handleChange:handleChange,errors:errors,touched:touched,values:values,handleSubmit:handleSubmit,isSubmitting:isSubmitting});};","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/ResetPassword.tsx"],"names":["useFormik","useTranslation","Yup","useDispatch","useHistory","ComponentPassword","useYup","setLoading","authApi","useNotify","PATH_SIGN_IN","ModuleResetPassword","props","email","resetPasswordId","t","YubResetPassword","dispatch","history","error","success","initialValues","password","conformPassword","registerSchema","object","shape","handleRegister","values","setSubmitting","resetPassword","res","data","push","errorsResponse","response","errors","validationSchema","onSubmit","handleChange","handleBlur","handleSubmit","isSubmitting","touched"],"mappings":"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","sourcesContent":["import { FormikHelpers, useFormik } from \"formik\";\nimport { useTranslation } from \"react-i18next\";\nimport * as Yup from \"yup\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router\";\n\nimport { ComponentPassword } from \"@components\";\nimport { IResetPassword } from \"@interfaces\";\nimport { useYup } from \"@validations\";\nimport { setLoading } from \"@redux\";\nimport { authApi } from \"@api\";\nimport { useNotify } from \"@utils\";\nimport { PATH_SIGN_IN } from \"@configs\";\n\ninterface IProps {\n    email: string;\n    resetPasswordId: string;\n}\n\nexport const ModuleResetPassword = (props: IProps) => {\n    //page props\n    const { email, resetPasswordId } = props;\n    //page hook\n    const { t } = useTranslation();\n    const { YubResetPassword } = useYup();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const { error, success } = useNotify();\n\n    //page variable\n    const initialValues: IResetPassword = {\n        password: \"\",\n        conformPassword: \"\",\n    };\n    const registerSchema = Yup.object().shape(YubResetPassword);\n\n    const handleRegister = async (\n        values: IResetPassword,\n        { setSubmitting }: FormikHelpers<IResetPassword>\n    ) => {\n        try {\n            setSubmitting(true);\n            dispatch(setLoading(true));\n            const res = await authApi.resetPassword({\n                password: values.password,\n                email,\n                resetPasswordId,\n            });\n            if (res.data.success) {\n                success(t(\"message.reset_pass.success\"));\n                history.push(PATH_SIGN_IN);\n            }\n        } catch (errors: any) {\n            const errorsResponse = errors.response.data.errors;\n            if (errorsResponse) {\n                error(errorsResponse);\n            } else {\n                error(t(\"message.reset_pass.fail\"));\n            }\n        } finally {\n            setSubmitting(false);\n            dispatch(setLoading(false));\n        }\n        //\n    };\n\n    const { values, handleChange, handleBlur, handleSubmit, isSubmitting, errors, touched } =\n        useFormik({\n            initialValues: initialValues,\n            validationSchema: registerSchema,\n            onSubmit: handleRegister,\n        });\n\n    return (\n        <ComponentPassword\n            handleBlur={handleBlur}\n            handleChange={handleChange}\n            errors={errors}\n            touched={touched}\n            values={values}\n            handleSubmit={handleSubmit}\n            isSubmitting={isSubmitting}\n        />\n    );\n};\n"]},"metadata":{},"sourceType":"module"}