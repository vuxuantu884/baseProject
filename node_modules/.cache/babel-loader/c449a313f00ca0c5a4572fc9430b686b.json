{"ast":null,"code":"import { __assign as e, __awaiter as t, __generator as r, __read as n } from \"tslib\";\nimport { convertHexToRgb as o, convertArgbToRgba as i, createLiffError as a, base64Url as s, convertArrayBuffer as l, compareVersion as c, qs as u, extractChannelIdFromLiffId as f, objectAssignKeyOnlyWithValue as d, addParamsToUrl as h, replaceUrlCredentialRemoved as p } from \"@liff/util\";\nimport { done as v } from \"@liff/ready\";\nimport { isLoggedIn as m } from \"@liff/is-logged-in\";\nimport { getContext as w, getLoginTmp as g, getExpireTime as b, getIsSubsequentLiffApp as C, getFeatureToken as k, setIsSubsequentLiffApp as F, getMST as _, getAccessToken as y, getRawContext as B, getIDToken as I, getClientId as x, getMSTChallenge as S, getMSTVerifier as T, getMSIT as A, getConfig as E, setDecodedIDToken as D, setAppData as L, setMST as O, setFeatureToken as U, setAccessToken as P, setContext as N, setMSTChallenge as K, setMSTVerifier as W, setClientId as M, setMSIT as j, setIDToken as H, getDecodedIDToken as J, removeLoginTmp as V, setExpireTime as q, setConfig as R, clearAutologinAttempt as z, setAutologinAttempt as G, getAutologinAttempt as Q } from \"@liff/store\";\nimport { INIT_FAILED as X, INVALID_ID_TOKEN as Y, FORBIDDEN as Z, SUB_WINDOW_HEALTH_CHECK_MESSAGE as $, INVALID_CONFIG as ee } from \"@liff/consts\";\nimport { load as te } from \"@liff/extensions\";\nimport { isInClient as re } from \"@liff/is-in-client\";\nimport { logout as ne } from \"@liff/logout\";\nimport { isSubWindow as oe } from \"@liff/is-sub-window\";\nimport { getMSTByMSIT as ie, getAppData as ae, getMainWindowOrigin as se, setMainWindowOrigin as le } from \"@liff/sub-window\";\nimport { fetch as ce, getEndPoint as ue, verifyAccessToken as fe } from \"@liff/server-api\";\nimport { logger as de } from \"@liff/logger\";\nimport { getLineVersion as he } from \"@liff/get-line-version\";\nimport { addListener as pe, removeListener as ve } from \"@liff/native-bridge\";\nimport { isApiAvailable as me } from \"@liff/is-api-available\";\nimport { getOS as we } from \"@liff/get-os\";\nvar ge = {\n  iconColor: \"#111111\",\n  statusBarColor: \"BLACK\",\n  titleTextColor: \"#111111\",\n  titleSubtextColor: \"#B7B7B7\",\n  titleButtonColor: \"#111111\",\n  titleBackgroundColor: \"#FFFFFF\",\n  progressBarColor: \"#06C755\",\n  progressBackgroundColor: \"#FFFFFF\",\n  titleButtonAreaBackgroundColor: \"#1FFFFFFF\",\n  titleButtonAreaBorderColor: \"#26000000\",\n  baseBackgroundColor: \"#FFFFFF\",\n  baseTextColor: \"#000000\",\n  lightButtonBorderColor: \"rgba(0, 0, 0, 0.15)\"\n},\n    be = {\n  iconColor: \"#FFFFFF\",\n  statusBarColor: \"WHITE\",\n  titleTextColor: \"#FFFFFF\",\n  titleSubtextColor: \"#949494\",\n  titleButtonColor: \"#FFFFFF\",\n  titleBackgroundColor: \"#111111\",\n  progressBarColor: \"#06C755\",\n  progressBackgroundColor: \"#111111\",\n  titleButtonAreaBackgroundColor: \"#1FFFFFFF\",\n  titleButtonAreaBorderColor: \"#26000000\",\n  baseBackgroundColor: \"#000000\",\n  baseTextColor: \"#FFFFFF\",\n  lightButtonBorderColor: \"rgba(255, 255, 255, 0.5)\"\n};\n\nfunction Ce() {\n  var e;\n\n  _e(\"color-scheme\", ((null == (e = w()) ? void 0 : e.menuColorSetting) || {\n    adaptableColorSchemes: [\"light\"]\n  }).adaptableColorSchemes.join(\" \"));\n\n  var t = window.matchMedia(\"(prefers-color-scheme: dark)\");\n  ke({\n    matches: null == t ? void 0 : t.matches,\n    media: null == t ? void 0 : t.media\n  }), t.addEventListener ? t.addEventListener(\"change\", ke) : t.addListener && t.addListener(ke);\n}\n\nfunction ke(t) {\n  var r = w(),\n      n = (null == r ? void 0 : r.menuColorSetting) || {\n    adaptableColorSchemes: [\"light\"],\n    lightModeColor: ge,\n    darkModeColor: be\n  },\n      o = n.adaptableColorSchemes,\n      i = n.lightModeColor,\n      a = n.darkModeColor,\n      s = o.includes(\"dark\");\n  t.matches && s ? Fe(e(e({}, be), a)) : Fe(e(e({}, ge), i));\n}\n\nfunction Fe(e) {\n  var t = e.iconColor,\n      r = e.statusBarColor,\n      n = e.titleTextColor,\n      a = e.titleSubtextColor,\n      s = e.titleButtonColor,\n      l = e.titleBackgroundColor,\n      c = e.progressBarColor,\n      u = e.progressBackgroundColor,\n      f = e.titleButtonAreaBackgroundColor,\n      d = e.titleButtonAreaBorderColor,\n      h = e.baseBackgroundColor,\n      p = e.baseTextColor,\n      v = e.lightButtonBorderColor;\n  _e(\"--liff-base-background-color\", h), _e(\"--liff-base-text-color\", p), _e(\"--liff-base-background-rgb-color\", o(h)), _e(\"--liff-base-text-rgb-color\", o(p)), _e(\"--liff-light-button-border-color\", v), _e(\"--liff-title-text-color\", n), _e(\"--liff-title-background-color\", l), _e(\"--liff-title-button-color\", s), _e(\"--liff-icon-color\", t), _e(\"--liff-status-bar-color\", r), _e(\"--liff-title-subtext-color\", a), _e(\"--liff-progress-bar-color\", c), _e(\"--liff-progress-background-color\", u), _e(\"--liff-title-button-area-background-color\", i(f)), _e(\"--liff-title-button-area-border-color\", i(d));\n}\n\nfunction _e(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\n\nfunction ye(e) {\n  return t(this, void 0, void 0, function () {\n    return r(this, function (t) {\n      switch (t.label) {\n        case 0:\n          return [4, te()];\n\n        case 1:\n          return t.sent().install(e), [2];\n      }\n    });\n  });\n}\n\nfunction Be() {\n  return t(this, void 0, void 0, function () {\n    return r(this, function (e) {\n      switch (e.label) {\n        case 0:\n          return [4, ce(ue(\"certs\"))];\n\n        case 1:\n          return [2, e.sent()];\n      }\n    });\n  });\n}\n\nfunction Ie(e, n, o) {\n  return t(this, void 0, void 0, function () {\n    var t;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return [4, crypto.subtle.importKey(\"jwk\", e, {\n            name: \"ECDSA\",\n            namedCurve: \"P-256\"\n          }, !1, [\"verify\"])];\n\n        case 1:\n          return t = r.sent(), [4, crypto.subtle.verify({\n            name: \"ECDSA\",\n            hash: {\n              name: \"SHA-256\"\n            }\n          }, t, o, n)];\n\n        case 2:\n          return [2, r.sent()];\n      }\n    });\n  });\n}\n\nfunction xe(e, o) {\n  return t(this, void 0, void 0, function () {\n    var t, i, c, u, f, d, h, p, v, m, w, g, b, C, k, F;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return t = e.split(\".\"), i = n(t, 3), c = i[0], u = i[1], f = i[2], d = JSON.parse(s.decode(c)), h = JSON.parse(s.decodeUnicode(u)), p = l(s.decode(f)), v = l(c + \".\" + u), [4, Be()];\n\n        case 1:\n          if (m = r.sent(), !(w = m.keys.find(function (e) {\n            return e.kid === d.kid;\n          }))) return [3, 6];\n          if (delete w.alg, \"ES256\" !== d.alg) throw a(Y, 'Invalid \"alg\" value in ID_TOKEN');\n          g = void 0, r.label = 2;\n\n        case 2:\n          return r.trys.push([2, 4,, 5]), [4, Ie(w, v, p)];\n\n        case 3:\n          return g = r.sent(), [3, 5];\n\n        case 4:\n          throw b = r.sent(), a(Y, \"Failed to use Crypto API to verify ID_TOKEN: \" + b);\n\n        case 5:\n          if (g) {\n            if (C = \"https://access.line.me\" !== h.iss, k = h.aud !== o, F = 1e3 * h.exp < Date.now(), C) throw a(Y, 'Invalid \"iss\" value in ID_TOKEN');\n            if (k) throw a(Y, 'Invalid \"aud\" value in ID_TOKEN');\n            if (F) throw a(Y, 'Invalid \"exp\" value in ID_TOKEN');\n            return [2, h];\n          }\n\n          throw a(Y, \"Invalid signature in ID_TOKEN\");\n\n        case 6:\n          throw a(Y, 'Invalid \"kid\" value in ID_TOKEN');\n\n        case 7:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction Se(e) {\n  var t = e.split(\".\");\n  if (t[1]) try {\n    var r = t[1].replace(/-/g, \"+\").replace(/_/g, \"/\");\n    return JSON.parse(window.atob(r));\n  } catch (n) {\n    return null;\n  }\n  return null;\n}\n\nfunction Te(e) {\n  var t = e.pathname,\n      r = e.query,\n      n = \"liff://\" + t + (r ? \"?\" + u.stringify(r) : \"\");\n  location.href = n;\n}\n\nvar Ae = null;\n\nfunction Ee() {\n  \"boolean\" == typeof Ae && de.warn(\"liff.init is not expected to be called more than once\"), Ae = !!C() || !(!re() || u.parse(window.location.hash).feature_token || k()) && (F(!0), !0);\n}\n\nfunction De() {\n  return Boolean(Ae);\n}\n\nfunction Le(e, n) {\n  return t(this, void 0, void 0, function () {\n    var t;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return (t = _()) ? [2, t] : e && n ? [4, ie({\n            msit: e,\n            mstVerifier: n\n          })] : [3, 2];\n\n        case 1:\n          return [2, r.sent().mst];\n\n        case 2:\n          return [2, null];\n      }\n    });\n  });\n}\n\nfunction Oe(e) {\n  return ce(ue(\"apps\") + \"/\" + e + \"/featureToken\");\n}\n\nfunction Ue(e) {\n  return t(this, void 0, void 0, function () {\n    var t, n, o, i;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return t = u.parse(window.location.hash), n = d({\n            access_token: y(),\n            context_token: B(),\n            feature_token: k(),\n            id_token: I(),\n            client_id: x(),\n            mst_challenge: S(),\n            mst_verifier: T(),\n            msit: A()\n          }, t), De() ? m() ? [4, Oe(e)] : [3, 2] : [3, 3];\n\n        case 1:\n          o = r.sent().featureToken, n.feature_token || (n.feature_token = o), r.label = 2;\n\n        case 2:\n          (i = f(e)) && (n.client_id = i), r.label = 3;\n\n        case 3:\n          return [2, n];\n      }\n    });\n  });\n}\n\nfunction Pe(e) {\n  if (e.persisted && me(\"multipleLiffTransition\")) if (\"ios\" === we()) window.location.reload();else {\n    var t = E().liffId,\n        r = k();\n    if (!t) throw a(X, \"Invalid LIFF ID.\");\n    if (!r) throw a(Z, \"Invalid featureToken for client features\");\n    Te({\n      pathname: \"app/\" + t,\n      query: {\n        feature_token: r\n      }\n    });\n  }\n}\n\nfunction Ne(e, n) {\n  return t(this, void 0, void 0, function () {\n    var t, o;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return [4, fe(e)];\n\n        case 1:\n          return t = r.sent().client_id, o = f(n), [2, t === o];\n      }\n    });\n  });\n}\n\nfunction Ke(e, n) {\n  return t(this, void 0, void 0, function () {\n    var t, o, i, s, l, u, f, d, p, v, w, g, b;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return [4, new Promise(function (e) {\n            var t = he();\n            if (!t || c(t, \"9.5.0\") < 0) e();else if (window._liff && window._liff.features) e();else {\n              de.debug(\"cannot find window._liff.features, listen to ready event\");\n\n              var r = function () {\n                de.debug(\"ready event is fired\"), ve(\"ready\", r), e();\n              };\n\n              pe(\"ready\", r);\n            }\n          })];\n\n        case 1:\n          return r.sent(), Ee(), [4, Ue(n.liffId)];\n\n        case 2:\n          return t = r.sent(), o = t.access_token, i = t.context_token, s = t.feature_token, l = t.id_token, u = t.client_id, f = t.mst_verifier, d = t.mst_challenge, p = t.msit, i && N(Se(i)), !oe() && s && (!function (e, t) {\n            me(\"multipleLiffTransition\") && Te({\n              pathname: \"app/\" + e,\n              query: {\n                feature_token: t\n              }\n            });\n          }(n.liffId, s), De() && U(s)), d && K(d), f && W(f), u && M(u), p && j(p), window.addEventListener(\"pageshow\", Pe), m() ? [3, 7] : s && o ? [3, 5] : De() ? (v = h(location.href, {\n            \"liff.hback\": \"2\"\n          }), e.login({\n            redirectUri: v\n          }), [4, new Promise(function () {})]) : [3, 4];\n\n        case 3:\n          r.sent(), r.label = 4;\n\n        case 4:\n          throw e.login(), a(X, \"Failed to parse feature_token or access_token\");\n\n        case 5:\n          return [4, Ne(o, n.liffId)];\n\n        case 6:\n          if (!r.sent()) throw e.login(), a(X, \"Failed to verify access_token\");\n          U(s), P(o), r.label = 7;\n\n        case 7:\n          return [4, Le(p, f)];\n\n        case 8:\n          return (w = r.sent()) ? (O(w), [4, ae({\n            mst: w\n          })]) : [3, 10];\n\n        case 9:\n          (g = r.sent().data) && L(JSON.stringify(g)), r.label = 10;\n\n        case 10:\n          return l && !I() && H(l), l && u && !J() ? [4, xe(l, u)] : [3, 12];\n\n        case 11:\n          (b = r.sent()) && D(b), r.label = 12;\n\n        case 12:\n          return [2];\n      }\n    });\n  });\n}\n\nfunction We(e) {\n  return t(this, void 0, void 0, function () {\n    var t, n, o, i, s, l, c;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          return t = ue(\"apps\"), n = t + \"/\" + e + \"/contextToken\", o = y(), i = {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }, o && (i.Authorization = \"Bearer \" + o), [4, ce(n, {\n            headers: i\n          })];\n\n        case 1:\n          if (s = r.sent(), !(l = s.contextToken)) throw a(X, \"Can not get context from server.\");\n          if (!(c = Se(l))) throw a(X, \"Invalid context token.\");\n          return [2, c];\n      }\n    });\n  });\n}\n\nfunction Me() {\n  return t(this, void 0, void 0, function () {\n    var e, t;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          if (!(e = E().liffId)) throw a(X, \"Invalid LIFF ID.\");\n          return [4, We(e)];\n\n        case 1:\n          return t = r.sent(), N(t), [2];\n      }\n    });\n  });\n}\n\nfunction je(e) {\n  return t(this, void 0, void 0, function () {\n    var n,\n        o,\n        i,\n        a = this;\n    return r(this, function (s) {\n      switch (s.label) {\n        case 0:\n          n = function () {\n            return t(a, void 0, void 0, function () {\n              var t, n, o, i, a, s;\n              return r(this, function (r) {\n                switch (r.label) {\n                  case 0:\n                    return [4, (l = E(), c = u.parse(window.location.search), f = g(), d = {\n                      grant_type: \"authorization_code\",\n                      client_id: c.liffClientId,\n                      appId: l.liffId,\n                      code: c.code,\n                      code_verifier: f.codeVerifier,\n                      redirect_uri: l.redirectUri || c.liffRedirectUri,\n                      id_token_key_type: \"JWK\"\n                    }, h = u.stringify(d), ce(ue(\"token\"), {\n                      method: \"POST\",\n                      headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\"\n                      },\n                      body: h\n                    }))];\n\n                  case 1:\n                    return t = r.sent(), n = t.access_token, o = t.id_token, i = t.expires_in, M(e), P(n), q(new Date(Date.now() + 1e3 * i)), V(), o ? (H(o), [4, xe(o, e)]) : [3, 3];\n\n                  case 2:\n                    (a = r.sent()) && D(a), r.label = 3;\n\n                  case 3:\n                    return (s = u.parse(location.hash).context_token) ? (N(Se(s)), [3, 6]) : [3, 4];\n\n                  case 4:\n                    return [4, Me()];\n\n                  case 5:\n                    r.sent(), r.label = 6;\n\n                  case 6:\n                    return [2];\n                }\n\n                var l, c, f, d, h;\n              });\n            });\n          }, s.label = 1;\n\n        case 1:\n          return s.trys.push([1, 3,, 4]), [4, n()];\n\n        case 2:\n          return s.sent(), [3, 4];\n\n        case 3:\n          throw o = s.sent(), i = o, V(), i;\n\n        case 4:\n          return [2];\n      }\n    });\n  });\n}\n\nvar He = new (function () {\n  function e() {\n    var e = this;\n    this.getAndValidateContext = function () {\n      var e = w();\n      if (!e) throw a(X, \"Could not get Context from server.\");\n      if (!e.endpointUrl) throw a(X, \"Could not get endpointUrl from server.\");\n      if (!e.permanentLinkPattern) throw a(X, \"Could not get permanentLinkPattern from server.\");\n      return e;\n    }, this.decodeState = function (t) {\n      var r = e.getAndValidateContext();\n      t = t.replace(/\\n/g, \"%0D%0A\");\n      var n = !r.endpointUrl.startsWith(\"/?\") && r.endpointUrl.includes(\"/?\") || !r.endpointUrl.startsWith(\"/#\") && r.endpointUrl.includes(\"/#\") || r.endpointUrl.endsWith(\"/\") || !t.startsWith(\"/?\") && t.includes(\"/?\") || !t.startsWith(\"/#\") && t.includes(\"/#\") || t.endsWith(\"/\"),\n          o = new URL(r.endpointUrl),\n          i = o.origin,\n          a = o.pathname,\n          s = o.search,\n          l = new URL(\"\" + i + e.attachSlashAtStart(t)),\n          c = l.pathname,\n          u = l.search,\n          f = l.hash,\n          d = \"\" + s + (s ? u.replace(/\\?/g, \"&\") : u),\n          h = (\"\" + a + e.attachSlashAtStart(c)).replace(\"//\", \"/\");\n      return (h = e.attachSlashAtStart(\"\" + h)).endsWith(\"/\") && !n && (h = h.substring(0, h.length - 1)), (\"\" + i + h + d + f).replace(/%0D%0A/g, \"\\n\");\n    };\n  }\n\n  return e.prototype.attachSlashAtStart = function (e) {\n    return (e && e.length > 0 && !e.startsWith(\"/\") ? \"/\" : \"\") + e;\n  }, e.prototype.invoke = function () {\n    return t(this, void 0, void 0, function () {\n      var e, t, n, o, i;\n      return r(this, function (r) {\n        switch (r.label) {\n          case 0:\n            if (e = u.parse(window.location.search), \"string\" != typeof (t = e[\"liff.state\"])) return [2];\n            r.label = 1;\n\n          case 1:\n            return r.trys.push([1, 4,, 5]), n = location.href, (o = this.decodeState(t)) === n ? [3, 3] : (e[\"liff.hback\"] ? location.replace(h(o, {\n              \"liff.hback\": e[\"liff.hback\"]\n            })) : location.replace(o), [4, new Promise(function () {})]);\n\n          case 2:\n            r.sent(), r.label = 3;\n\n          case 3:\n            return [3, 5];\n\n          case 4:\n            if ((i = r.sent()).code === X) throw i;\n            return de.debug(i), [3, 5];\n\n          case 5:\n            return [2];\n        }\n      });\n    });\n  }, e;\n}())();\n\nfunction Je(e, n, o) {\n  return t(this, void 0, void 0, function () {\n    var t;\n    return r(this, function (r) {\n      switch (r.label) {\n        case 0:\n          if (!o.liffId) throw a(ee, \"liffId is necessary for liff.init()\");\n          return R(o), !re() && m() && (b() || ne()), t = u.parse(window.location.search), !oe() || re() ? [3, 2] : [4, new Promise(function (e) {\n            se() ? e() : window.addEventListener(\"message\", function t(r) {\n              var n = r.data,\n                  o = r.source,\n                  i = r.origin;\n\n              if (n) {\n                var a = n.type,\n                    s = n.message;\n                a === $ && (window.removeEventListener(\"message\", t), s && L(s), le(i), o && o.postMessage && o.postMessage({\n                  status: $\n                }, i), e());\n              }\n            });\n          })];\n\n        case 1:\n          r.sent(), r.label = 2;\n\n        case 2:\n          if (t.error && t.liffOAuth2Error) throw l = t.error, c = t.error_description, f = c.replace(/\\+/g, \" \"), a(X, l + \": \" + f);\n          return i = t.code, s = g(), Boolean(i && !m() && s && s.codeVerifier) ? [4, je(t.liffClientId)] : [3, 4];\n\n        case 3:\n          r.sent(), r.label = 4;\n\n        case 4:\n          return re() ? [4, Ke(e, o)] : [3, 6];\n\n        case 5:\n          return r.sent(), [3, 8];\n\n        case 6:\n          return m() ? [3, 8] : [4, Me()];\n\n        case 7:\n          r.sent(), r.label = 8;\n\n        case 8:\n          return [4, He.invoke()];\n\n        case 9:\n          return r.sent(), [4, n.runHook(\"beforeInitFinished\")];\n\n        case 10:\n          return r.sent(), p(window.location.href), [2];\n      }\n\n      var i, s, l, c, f;\n    });\n  });\n}\n\nvar Ve = function () {\n  function e(e) {\n    this.moduleDriver = e;\n  }\n\n  return Object.defineProperty(e.prototype, \"name\", {\n    get: function () {\n      return \"init\";\n    },\n    enumerable: !1,\n    configurable: !0\n  }), e.prototype.install = function (e) {\n    var t = e.liff;\n    return this.liff = t, this.init.bind(this);\n  }, e.prototype.init = function (e, n, o) {\n    return t(this, void 0, void 0, function () {\n      var t;\n      return r(this, function (r) {\n        switch (r.label) {\n          case 0:\n            i = this.liff, window && !window.liff && (window.liff = i), r.label = 1;\n\n          case 1:\n            return r.trys.push([1, 9,, 11]), [4, Promise.all([ye(this.liff), Je(this.liff, this.moduleDriver, e)])];\n\n          case 2:\n            return r.sent(), Ce(), [4, this.moduleDriver.runHook(\"beforeInitSuccess\")];\n\n          case 3:\n            if (r.sent(), !e.withLoginOnExternalBrowser || m()) return [3, 7];\n            if (!Q()) return [3, 4];\n            throw a(X, \"Auto login failure\");\n\n          case 4:\n            return G(), this.liff.login(), [4, new Promise(function () {})];\n\n          case 5:\n            r.sent(), r.label = 6;\n\n          case 6:\n            return [3, 8];\n\n          case 7:\n            e.withLoginOnExternalBrowser && z(), r.label = 8;\n\n          case 8:\n            return \"function\" == typeof n && n(), v(), [3, 11];\n\n          case 9:\n            return t = r.sent(), [4, this.moduleDriver.runHook(\"initError\", t)];\n\n          case 10:\n            throw r.sent(), \"function\" == typeof o && o(t), t;\n\n          case 11:\n            return [2];\n        }\n\n        var i;\n      });\n    });\n  }, e;\n}();\n\nexport { Ve as InitModule };","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/node_modules/@liff/init/lib/index.es.js"],"names":["__assign","e","__awaiter","t","__generator","r","__read","n","convertHexToRgb","o","convertArgbToRgba","i","createLiffError","a","base64Url","s","convertArrayBuffer","l","compareVersion","c","qs","u","extractChannelIdFromLiffId","f","objectAssignKeyOnlyWithValue","d","addParamsToUrl","h","replaceUrlCredentialRemoved","p","done","v","isLoggedIn","m","getContext","w","getLoginTmp","g","getExpireTime","b","getIsSubsequentLiffApp","C","getFeatureToken","k","setIsSubsequentLiffApp","F","getMST","_","getAccessToken","y","getRawContext","B","getIDToken","I","getClientId","x","getMSTChallenge","S","getMSTVerifier","T","getMSIT","A","getConfig","E","setDecodedIDToken","D","setAppData","L","setMST","O","setFeatureToken","U","setAccessToken","P","setContext","N","setMSTChallenge","K","setMSTVerifier","W","setClientId","M","setMSIT","j","setIDToken","H","getDecodedIDToken","J","removeLoginTmp","V","setExpireTime","q","setConfig","R","clearAutologinAttempt","z","setAutologinAttempt","G","getAutologinAttempt","Q","INIT_FAILED","X","INVALID_ID_TOKEN","Y","FORBIDDEN","Z","SUB_WINDOW_HEALTH_CHECK_MESSAGE","$","INVALID_CONFIG","ee","load","te","isInClient","re","logout","ne","isSubWindow","oe","getMSTByMSIT","ie","getAppData","ae","getMainWindowOrigin","se","setMainWindowOrigin","le","fetch","ce","getEndPoint","ue","verifyAccessToken","fe","logger","de","getLineVersion","he","addListener","pe","removeListener","ve","isApiAvailable","me","getOS","we","ge","iconColor","statusBarColor","titleTextColor","titleSubtextColor","titleButtonColor","titleBackgroundColor","progressBarColor","progressBackgroundColor","titleButtonAreaBackgroundColor","titleButtonAreaBorderColor","baseBackgroundColor","baseTextColor","lightButtonBorderColor","be","Ce","_e","menuColorSetting","adaptableColorSchemes","join","window","matchMedia","ke","matches","media","addEventListener","lightModeColor","darkModeColor","includes","Fe","document","documentElement","style","setProperty","ye","label","sent","install","Be","Ie","crypto","subtle","importKey","name","namedCurve","verify","hash","xe","split","JSON","parse","decode","decodeUnicode","keys","find","kid","alg","trys","push","iss","aud","exp","Date","now","Se","replace","atob","Te","pathname","query","stringify","location","href","Ae","Ee","warn","feature_token","De","Boolean","Le","msit","mstVerifier","mst","Oe","Ue","access_token","context_token","id_token","client_id","mst_challenge","mst_verifier","featureToken","Pe","persisted","reload","liffId","Ne","Ke","Promise","_liff","features","debug","login","redirectUri","data","We","Accept","Authorization","headers","contextToken","Me","je","search","grant_type","liffClientId","appId","code","code_verifier","codeVerifier","redirect_uri","liffRedirectUri","id_token_key_type","method","body","expires_in","He","getAndValidateContext","endpointUrl","permanentLinkPattern","decodeState","startsWith","endsWith","URL","origin","attachSlashAtStart","substring","length","prototype","invoke","Je","source","type","message","removeEventListener","postMessage","status","error","liffOAuth2Error","error_description","runHook","Ve","moduleDriver","Object","defineProperty","get","enumerable","configurable","liff","init","bind","all","withLoginOnExternalBrowser","InitModule"],"mappings":"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","sourcesContent":["import{__assign as e,__awaiter as t,__generator as r,__read as n}from\"tslib\";import{convertHexToRgb as o,convertArgbToRgba as i,createLiffError as a,base64Url as s,convertArrayBuffer as l,compareVersion as c,qs as u,extractChannelIdFromLiffId as f,objectAssignKeyOnlyWithValue as d,addParamsToUrl as h,replaceUrlCredentialRemoved as p}from\"@liff/util\";import{done as v}from\"@liff/ready\";import{isLoggedIn as m}from\"@liff/is-logged-in\";import{getContext as w,getLoginTmp as g,getExpireTime as b,getIsSubsequentLiffApp as C,getFeatureToken as k,setIsSubsequentLiffApp as F,getMST as _,getAccessToken as y,getRawContext as B,getIDToken as I,getClientId as x,getMSTChallenge as S,getMSTVerifier as T,getMSIT as A,getConfig as E,setDecodedIDToken as D,setAppData as L,setMST as O,setFeatureToken as U,setAccessToken as P,setContext as N,setMSTChallenge as K,setMSTVerifier as W,setClientId as M,setMSIT as j,setIDToken as H,getDecodedIDToken as J,removeLoginTmp as V,setExpireTime as q,setConfig as R,clearAutologinAttempt as z,setAutologinAttempt as G,getAutologinAttempt as Q}from\"@liff/store\";import{INIT_FAILED as X,INVALID_ID_TOKEN as Y,FORBIDDEN as Z,SUB_WINDOW_HEALTH_CHECK_MESSAGE as $,INVALID_CONFIG as ee}from\"@liff/consts\";import{load as te}from\"@liff/extensions\";import{isInClient as re}from\"@liff/is-in-client\";import{logout as ne}from\"@liff/logout\";import{isSubWindow as oe}from\"@liff/is-sub-window\";import{getMSTByMSIT as ie,getAppData as ae,getMainWindowOrigin as se,setMainWindowOrigin as le}from\"@liff/sub-window\";import{fetch as ce,getEndPoint as ue,verifyAccessToken as fe}from\"@liff/server-api\";import{logger as de}from\"@liff/logger\";import{getLineVersion as he}from\"@liff/get-line-version\";import{addListener as pe,removeListener as ve}from\"@liff/native-bridge\";import{isApiAvailable as me}from\"@liff/is-api-available\";import{getOS as we}from\"@liff/get-os\";var ge={iconColor:\"#111111\",statusBarColor:\"BLACK\",titleTextColor:\"#111111\",titleSubtextColor:\"#B7B7B7\",titleButtonColor:\"#111111\",titleBackgroundColor:\"#FFFFFF\",progressBarColor:\"#06C755\",progressBackgroundColor:\"#FFFFFF\",titleButtonAreaBackgroundColor:\"#1FFFFFFF\",titleButtonAreaBorderColor:\"#26000000\",baseBackgroundColor:\"#FFFFFF\",baseTextColor:\"#000000\",lightButtonBorderColor:\"rgba(0, 0, 0, 0.15)\"},be={iconColor:\"#FFFFFF\",statusBarColor:\"WHITE\",titleTextColor:\"#FFFFFF\",titleSubtextColor:\"#949494\",titleButtonColor:\"#FFFFFF\",titleBackgroundColor:\"#111111\",progressBarColor:\"#06C755\",progressBackgroundColor:\"#111111\",titleButtonAreaBackgroundColor:\"#1FFFFFFF\",titleButtonAreaBorderColor:\"#26000000\",baseBackgroundColor:\"#000000\",baseTextColor:\"#FFFFFF\",lightButtonBorderColor:\"rgba(255, 255, 255, 0.5)\"};function Ce(){var e;_e(\"color-scheme\",((null==(e=w())?void 0:e.menuColorSetting)||{adaptableColorSchemes:[\"light\"]}).adaptableColorSchemes.join(\" \"));var t=window.matchMedia(\"(prefers-color-scheme: dark)\");ke({matches:null==t?void 0:t.matches,media:null==t?void 0:t.media}),t.addEventListener?t.addEventListener(\"change\",ke):t.addListener&&t.addListener(ke)}function ke(t){var r=w(),n=(null==r?void 0:r.menuColorSetting)||{adaptableColorSchemes:[\"light\"],lightModeColor:ge,darkModeColor:be},o=n.adaptableColorSchemes,i=n.lightModeColor,a=n.darkModeColor,s=o.includes(\"dark\");t.matches&&s?Fe(e(e({},be),a)):Fe(e(e({},ge),i))}function Fe(e){var t=e.iconColor,r=e.statusBarColor,n=e.titleTextColor,a=e.titleSubtextColor,s=e.titleButtonColor,l=e.titleBackgroundColor,c=e.progressBarColor,u=e.progressBackgroundColor,f=e.titleButtonAreaBackgroundColor,d=e.titleButtonAreaBorderColor,h=e.baseBackgroundColor,p=e.baseTextColor,v=e.lightButtonBorderColor;_e(\"--liff-base-background-color\",h),_e(\"--liff-base-text-color\",p),_e(\"--liff-base-background-rgb-color\",o(h)),_e(\"--liff-base-text-rgb-color\",o(p)),_e(\"--liff-light-button-border-color\",v),_e(\"--liff-title-text-color\",n),_e(\"--liff-title-background-color\",l),_e(\"--liff-title-button-color\",s),_e(\"--liff-icon-color\",t),_e(\"--liff-status-bar-color\",r),_e(\"--liff-title-subtext-color\",a),_e(\"--liff-progress-bar-color\",c),_e(\"--liff-progress-background-color\",u),_e(\"--liff-title-button-area-background-color\",i(f)),_e(\"--liff-title-button-area-border-color\",i(d))}function _e(e,t){document.documentElement.style.setProperty(e,t)}function ye(e){return t(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,te()];case 1:return t.sent().install(e),[2]}}))}))}function Be(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,ce(ue(\"certs\"))];case 1:return[2,e.sent()]}}))}))}function Ie(e,n,o){return t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return[4,crypto.subtle.importKey(\"jwk\",e,{name:\"ECDSA\",namedCurve:\"P-256\"},!1,[\"verify\"])];case 1:return t=r.sent(),[4,crypto.subtle.verify({name:\"ECDSA\",hash:{name:\"SHA-256\"}},t,o,n)];case 2:return[2,r.sent()]}}))}))}function xe(e,o){return t(this,void 0,void 0,(function(){var t,i,c,u,f,d,h,p,v,m,w,g,b,C,k,F;return r(this,(function(r){switch(r.label){case 0:return t=e.split(\".\"),i=n(t,3),c=i[0],u=i[1],f=i[2],d=JSON.parse(s.decode(c)),h=JSON.parse(s.decodeUnicode(u)),p=l(s.decode(f)),v=l(c+\".\"+u),[4,Be()];case 1:if(m=r.sent(),!(w=m.keys.find((function(e){return e.kid===d.kid}))))return[3,6];if(delete w.alg,\"ES256\"!==d.alg)throw a(Y,'Invalid \"alg\" value in ID_TOKEN');g=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,Ie(w,v,p)];case 3:return g=r.sent(),[3,5];case 4:throw b=r.sent(),a(Y,\"Failed to use Crypto API to verify ID_TOKEN: \"+b);case 5:if(g){if(C=\"https://access.line.me\"!==h.iss,k=h.aud!==o,F=1e3*h.exp<Date.now(),C)throw a(Y,'Invalid \"iss\" value in ID_TOKEN');if(k)throw a(Y,'Invalid \"aud\" value in ID_TOKEN');if(F)throw a(Y,'Invalid \"exp\" value in ID_TOKEN');return[2,h]}throw a(Y,\"Invalid signature in ID_TOKEN\");case 6:throw a(Y,'Invalid \"kid\" value in ID_TOKEN');case 7:return[2]}}))}))}function Se(e){var t=e.split(\".\");if(t[1])try{var r=t[1].replace(/-/g,\"+\").replace(/_/g,\"/\");return JSON.parse(window.atob(r))}catch(n){return null}return null}function Te(e){var t=e.pathname,r=e.query,n=\"liff://\"+t+(r?\"?\"+u.stringify(r):\"\");location.href=n}var Ae=null;function Ee(){\"boolean\"==typeof Ae&&de.warn(\"liff.init is not expected to be called more than once\"),Ae=!!C()||!(!re()||u.parse(window.location.hash).feature_token||k())&&(F(!0),!0)}function De(){return Boolean(Ae)}function Le(e,n){return t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return(t=_())?[2,t]:e&&n?[4,ie({msit:e,mstVerifier:n})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}}))}))}function Oe(e){return ce(ue(\"apps\")+\"/\"+e+\"/featureToken\")}function Ue(e){return t(this,void 0,void 0,(function(){var t,n,o,i;return r(this,(function(r){switch(r.label){case 0:return t=u.parse(window.location.hash),n=d({access_token:y(),context_token:B(),feature_token:k(),id_token:I(),client_id:x(),mst_challenge:S(),mst_verifier:T(),msit:A()},t),De()?m()?[4,Oe(e)]:[3,2]:[3,3];case 1:o=r.sent().featureToken,n.feature_token||(n.feature_token=o),r.label=2;case 2:(i=f(e))&&(n.client_id=i),r.label=3;case 3:return[2,n]}}))}))}function Pe(e){if(e.persisted&&me(\"multipleLiffTransition\"))if(\"ios\"===we())window.location.reload();else{var t=E().liffId,r=k();if(!t)throw a(X,\"Invalid LIFF ID.\");if(!r)throw a(Z,\"Invalid featureToken for client features\");Te({pathname:\"app/\"+t,query:{feature_token:r}})}}function Ne(e,n){return t(this,void 0,void 0,(function(){var t,o;return r(this,(function(r){switch(r.label){case 0:return[4,fe(e)];case 1:return t=r.sent().client_id,o=f(n),[2,t===o]}}))}))}function Ke(e,n){return t(this,void 0,void 0,(function(){var t,o,i,s,l,u,f,d,p,v,w,g,b;return r(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){var t=he();if(!t||c(t,\"9.5.0\")<0)e();else if(window._liff&&window._liff.features)e();else{de.debug(\"cannot find window._liff.features, listen to ready event\");var r=function(){de.debug(\"ready event is fired\"),ve(\"ready\",r),e()};pe(\"ready\",r)}}))];case 1:return r.sent(),Ee(),[4,Ue(n.liffId)];case 2:return t=r.sent(),o=t.access_token,i=t.context_token,s=t.feature_token,l=t.id_token,u=t.client_id,f=t.mst_verifier,d=t.mst_challenge,p=t.msit,i&&N(Se(i)),!oe()&&s&&(!function(e,t){me(\"multipleLiffTransition\")&&Te({pathname:\"app/\"+e,query:{feature_token:t}})}(n.liffId,s),De()&&U(s)),d&&K(d),f&&W(f),u&&M(u),p&&j(p),window.addEventListener(\"pageshow\",Pe),m()?[3,7]:s&&o?[3,5]:De()?(v=h(location.href,{\"liff.hback\":\"2\"}),e.login({redirectUri:v}),[4,new Promise((function(){}))]):[3,4];case 3:r.sent(),r.label=4;case 4:throw e.login(),a(X,\"Failed to parse feature_token or access_token\");case 5:return[4,Ne(o,n.liffId)];case 6:if(!r.sent())throw e.login(),a(X,\"Failed to verify access_token\");U(s),P(o),r.label=7;case 7:return[4,Le(p,f)];case 8:return(w=r.sent())?(O(w),[4,ae({mst:w})]):[3,10];case 9:(g=r.sent().data)&&L(JSON.stringify(g)),r.label=10;case 10:return l&&!I()&&H(l),l&&u&&!J()?[4,xe(l,u)]:[3,12];case 11:(b=r.sent())&&D(b),r.label=12;case 12:return[2]}}))}))}function We(e){return t(this,void 0,void 0,(function(){var t,n,o,i,s,l,c;return r(this,(function(r){switch(r.label){case 0:return t=ue(\"apps\"),n=t+\"/\"+e+\"/contextToken\",o=y(),i={\"Content-Type\":\"application/json\",Accept:\"application/json\"},o&&(i.Authorization=\"Bearer \"+o),[4,ce(n,{headers:i})];case 1:if(s=r.sent(),!(l=s.contextToken))throw a(X,\"Can not get context from server.\");if(!(c=Se(l)))throw a(X,\"Invalid context token.\");return[2,c]}}))}))}function Me(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(!(e=E().liffId))throw a(X,\"Invalid LIFF ID.\");return[4,We(e)];case 1:return t=r.sent(),N(t),[2]}}))}))}function je(e){return t(this,void 0,void 0,(function(){var n,o,i,a=this;return r(this,(function(s){switch(s.label){case 0:n=function(){return t(a,void 0,void 0,(function(){var t,n,o,i,a,s;return r(this,(function(r){switch(r.label){case 0:return[4,(l=E(),c=u.parse(window.location.search),f=g(),d={grant_type:\"authorization_code\",client_id:c.liffClientId,appId:l.liffId,code:c.code,code_verifier:f.codeVerifier,redirect_uri:l.redirectUri||c.liffRedirectUri,id_token_key_type:\"JWK\"},h=u.stringify(d),ce(ue(\"token\"),{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded;charset=UTF-8\"},body:h}))];case 1:return t=r.sent(),n=t.access_token,o=t.id_token,i=t.expires_in,M(e),P(n),q(new Date(Date.now()+1e3*i)),V(),o?(H(o),[4,xe(o,e)]):[3,3];case 2:(a=r.sent())&&D(a),r.label=3;case 3:return(s=u.parse(location.hash).context_token)?(N(Se(s)),[3,6]):[3,4];case 4:return[4,Me()];case 5:r.sent(),r.label=6;case 6:return[2]}var l,c,f,d,h}))}))},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n()];case 2:return s.sent(),[3,4];case 3:throw o=s.sent(),i=o,V(),i;case 4:return[2]}}))}))}var He=new(function(){function e(){var e=this;this.getAndValidateContext=function(){var e=w();if(!e)throw a(X,\"Could not get Context from server.\");if(!e.endpointUrl)throw a(X,\"Could not get endpointUrl from server.\");if(!e.permanentLinkPattern)throw a(X,\"Could not get permanentLinkPattern from server.\");return e},this.decodeState=function(t){var r=e.getAndValidateContext();t=t.replace(/\\n/g,\"%0D%0A\");var n=!r.endpointUrl.startsWith(\"/?\")&&r.endpointUrl.includes(\"/?\")||!r.endpointUrl.startsWith(\"/#\")&&r.endpointUrl.includes(\"/#\")||r.endpointUrl.endsWith(\"/\")||!t.startsWith(\"/?\")&&t.includes(\"/?\")||!t.startsWith(\"/#\")&&t.includes(\"/#\")||t.endsWith(\"/\"),o=new URL(r.endpointUrl),i=o.origin,a=o.pathname,s=o.search,l=new URL(\"\"+i+e.attachSlashAtStart(t)),c=l.pathname,u=l.search,f=l.hash,d=\"\"+s+(s?u.replace(/\\?/g,\"&\"):u),h=(\"\"+a+e.attachSlashAtStart(c)).replace(\"//\",\"/\");return(h=e.attachSlashAtStart(\"\"+h)).endsWith(\"/\")&&!n&&(h=h.substring(0,h.length-1)),(\"\"+i+h+d+f).replace(/%0D%0A/g,\"\\n\")}}return e.prototype.attachSlashAtStart=function(e){return(e&&e.length>0&&!e.startsWith(\"/\")?\"/\":\"\")+e},e.prototype.invoke=function(){return t(this,void 0,void 0,(function(){var e,t,n,o,i;return r(this,(function(r){switch(r.label){case 0:if(e=u.parse(window.location.search),\"string\"!=typeof(t=e[\"liff.state\"]))return[2];r.label=1;case 1:return r.trys.push([1,4,,5]),n=location.href,(o=this.decodeState(t))===n?[3,3]:(e[\"liff.hback\"]?location.replace(h(o,{\"liff.hback\":e[\"liff.hback\"]})):location.replace(o),[4,new Promise((function(){}))]);case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if((i=r.sent()).code===X)throw i;return de.debug(i),[3,5];case 5:return[2]}}))}))},e}());function Je(e,n,o){return t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:if(!o.liffId)throw a(ee,\"liffId is necessary for liff.init()\");return R(o),!re()&&m()&&(b()||ne()),t=u.parse(window.location.search),!oe()||re()?[3,2]:[4,new Promise((function(e){se()?e():window.addEventListener(\"message\",(function t(r){var n=r.data,o=r.source,i=r.origin;if(n){var a=n.type,s=n.message;a===$&&(window.removeEventListener(\"message\",t),s&&L(s),le(i),o&&o.postMessage&&o.postMessage({status:$},i),e())}}))}))];case 1:r.sent(),r.label=2;case 2:if(t.error&&t.liffOAuth2Error)throw l=t.error,c=t.error_description,f=c.replace(/\\+/g,\" \"),a(X,l+\": \"+f);return i=t.code,s=g(),Boolean(i&&!m()&&s&&s.codeVerifier)?[4,je(t.liffClientId)]:[3,4];case 3:r.sent(),r.label=4;case 4:return re()?[4,Ke(e,o)]:[3,6];case 5:return r.sent(),[3,8];case 6:return m()?[3,8]:[4,Me()];case 7:r.sent(),r.label=8;case 8:return[4,He.invoke()];case 9:return r.sent(),[4,n.runHook(\"beforeInitFinished\")];case 10:return r.sent(),p(window.location.href),[2]}var i,s,l,c,f}))}))}var Ve=function(){function e(e){this.moduleDriver=e}return Object.defineProperty(e.prototype,\"name\",{get:function(){return\"init\"},enumerable:!1,configurable:!0}),e.prototype.install=function(e){var t=e.liff;return this.liff=t,this.init.bind(this)},e.prototype.init=function(e,n,o){return t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:i=this.liff,window&&!window.liff&&(window.liff=i),r.label=1;case 1:return r.trys.push([1,9,,11]),[4,Promise.all([ye(this.liff),Je(this.liff,this.moduleDriver,e)])];case 2:return r.sent(),Ce(),[4,this.moduleDriver.runHook(\"beforeInitSuccess\")];case 3:if(r.sent(),!e.withLoginOnExternalBrowser||m())return[3,7];if(!Q())return[3,4];throw a(X,\"Auto login failure\");case 4:return G(),this.liff.login(),[4,new Promise((function(){}))];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:e.withLoginOnExternalBrowser&&z(),r.label=8;case 8:return\"function\"==typeof n&&n(),v(),[3,11];case 9:return t=r.sent(),[4,this.moduleDriver.runHook(\"initError\",t)];case 10:throw r.sent(),\"function\"==typeof o&&o(t),t;case 11:return[2]}var i}))}))},e}();export{Ve as InitModule};\n"]},"metadata":{},"sourceType":"module"}