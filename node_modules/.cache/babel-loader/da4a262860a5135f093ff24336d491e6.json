{"ast":null,"code":"var _jsxFileName = \"/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Google.tsx\",\n    _s = $RefreshSig$();\n\nimport { memo, useCallback } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\nimport { ComponentGoogleButton } from \"@components\";\nimport { ggLogin, ggSignup, logout, openToast, setExternalLogin } from \"@redux\";\nimport { enumExternalAuthType, enumExternalMethod } from \"@configs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModuleGoogle = /*#__PURE__*/memo(_c = _s(props => {\n  _s();\n\n  //hooks\n  const dispatch = useDispatch();\n  const {\n    t\n  } = useTranslation();\n\n  const handleGGSuccess = async response => {\n    const accessToken = response === null || response === void 0 ? void 0 : response.accessToken;\n\n    if (!accessToken) {\n      dispatch(openToast({\n        message: t(\"page.auth.login_failed\"),\n        type: \"error\",\n        autoHideDuration: 2000\n      }));\n      dispatch(logout());\n    }\n\n    try {\n      let response;\n\n      if (props.state.type === enumExternalAuthType.LOGIN) {\n        const ggLoginData = {\n          token: accessToken\n        };\n        response = await dispatch(ggLogin(ggLoginData)); //WHAT: wrap function in create async thunk\n        //@ts-ignore\n\n        unwrapResult(response);\n      } else if (props.state.type === enumExternalAuthType.SIGNUP) {\n        const ggSignupData = {\n          token: accessToken,\n          inviteId: props.state.inviteId\n        };\n        response = await dispatch(ggSignup(ggSignupData)); //WHAT: wrap function in create async thunk\n        //@ts-ignore\n\n        unwrapResult(response);\n      } //@ts-ignore\n\n\n      if (!response.payload.accessToken) {\n        dispatch(openToast({\n          message: t(\"page.auth.email_password_correct\"),\n          type: \"error\",\n          autoHideDuration: 2000\n        }));\n      } else {\n        dispatch(openToast({\n          message: t(\"page.auth.login_successfully\"),\n          type: \"success\",\n          autoHideDuration: 2000\n        }));\n      }\n    } catch (error) {\n      props.errorHandler(error);\n    }\n  };\n\n  const handleGGFail = () => {\n    dispatch(logout());\n  };\n\n  const handleOnClick = useCallback(() => {\n    dispatch(setExternalLogin({\n      type: enumExternalMethod.GOOGLE\n    }));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(GoogleLogin, {\n    clientId: process.env.REACT_APP_GOOGLE_ID || \"918086977464-i1t2r5gpv27chedpe4jv9raihno46qgt.apps.googleusercontent.com\",\n    render: renderProps => /*#__PURE__*/_jsxDEV(ComponentGoogleButton, {\n      onClick: renderProps.onClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 38\n    }, this),\n    onSuccess: handleGGSuccess,\n    onFailure: handleGGFail,\n    cookiePolicy: \"single_host_origin\",\n    onRequest: handleOnClick\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 9\n  }, this);\n}, \"2w1vP0r5AlpFXQToErS4DqWrFDM=\", false, function () {\n  return [useDispatch, useTranslation];\n}));\n_c2 = ModuleGoogle;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ModuleGoogle$memo\");\n$RefreshReg$(_c2, \"ModuleGoogle\");","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Google.tsx"],"names":["memo","useCallback","GoogleLogin","useDispatch","useTranslation","unwrapResult","ComponentGoogleButton","ggLogin","ggSignup","logout","openToast","setExternalLogin","enumExternalAuthType","enumExternalMethod","ModuleGoogle","props","dispatch","t","handleGGSuccess","response","accessToken","message","type","autoHideDuration","state","LOGIN","ggLoginData","token","SIGNUP","ggSignupData","inviteId","payload","error","errorHandler","handleGGFail","handleOnClick","GOOGLE","process","env","REACT_APP_GOOGLE_ID","renderProps","onClick"],"mappings":"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","sourcesContent":["import { memo, useCallback } from \"react\";\nimport GoogleLogin from \"react-google-login\";\nimport { useDispatch } from \"react-redux\";\nimport { useTranslation } from \"react-i18next\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\n\nimport { ComponentGoogleButton } from \"@components\";\nimport { ggLogin, ggSignup, logout, openToast, setExternalLogin } from \"@redux\";\nimport { IExternalAuthState, IGGLogin, IGGSignup } from \"@interfaces\";\nimport { enumExternalAuthType, enumExternalMethod } from \"@configs\";\n\ninterface IProps {\n    errorHandler: (error: any) => void;\n    state: IExternalAuthState;\n}\n\nexport const ModuleGoogle = memo((props: IProps) => {\n    //hooks\n    const dispatch = useDispatch();\n    const { t } = useTranslation();\n\n    const handleGGSuccess = async (response: any) => {\n        const accessToken = response?.accessToken;\n        if (!accessToken) {\n            dispatch(\n                openToast({\n                    message: t(\"page.auth.login_failed\"),\n                    type: \"error\",\n                    autoHideDuration: 2000,\n                })\n            );\n\n            dispatch(logout());\n        }\n\n        try {\n            let response;\n            if (props.state.type === enumExternalAuthType.LOGIN) {\n                const ggLoginData: IGGLogin = {\n                    token: accessToken,\n                };\n                response = await dispatch(ggLogin(ggLoginData));\n                //WHAT: wrap function in create async thunk\n                //@ts-ignore\n                unwrapResult(response);\n            } else if (props.state.type === enumExternalAuthType.SIGNUP) {\n                const ggSignupData: IGGSignup = {\n                    token: accessToken,\n                    inviteId: props.state.inviteId,\n                };\n                response = await dispatch(ggSignup(ggSignupData));\n                //WHAT: wrap function in create async thunk\n                //@ts-ignore\n                unwrapResult(response);\n            }\n\n            //@ts-ignore\n            if (!response.payload.accessToken) {\n                dispatch(\n                    openToast({\n                        message: t(\"page.auth.email_password_correct\"),\n                        type: \"error\",\n                        autoHideDuration: 2000,\n                    })\n                );\n            } else {\n                dispatch(\n                    openToast({\n                        message: t(\"page.auth.login_successfully\"),\n                        type: \"success\",\n                        autoHideDuration: 2000,\n                    })\n                );\n            }\n        } catch (error) {\n            props.errorHandler(error);\n        }\n    };\n\n    const handleGGFail = () => {\n        dispatch(logout());\n    };\n\n    const handleOnClick = useCallback(() => {\n        dispatch(setExternalLogin({ type: enumExternalMethod.GOOGLE }));\n    }, []);\n\n    return (\n        <GoogleLogin\n            clientId={\n                process.env.REACT_APP_GOOGLE_ID ||\n                \"918086977464-i1t2r5gpv27chedpe4jv9raihno46qgt.apps.googleusercontent.com\"\n            }\n            render={(renderProps) => <ComponentGoogleButton onClick={renderProps.onClick} />}\n            onSuccess={handleGGSuccess}\n            onFailure={handleGGFail}\n            cookiePolicy={\"single_host_origin\"}\n            onRequest={handleOnClick}\n        />\n    );\n});\n"]},"metadata":{},"sourceType":"module"}