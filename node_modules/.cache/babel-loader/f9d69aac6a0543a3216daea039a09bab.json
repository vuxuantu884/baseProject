{"ast":null,"code":"var _jsxFileName = \"/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Line.tsx\",\n    _s = $RefreshSig$();\n\nimport querystring from \"querystring\";\nimport { memo, useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport liff from \"@line/liff\";\nimport { ComponentLineButton } from \"@components\";\nimport { LINE_ACCESS_URL, LINE_SCOPE, PATH_LINE_LOGIN } from \"@configs\";\nimport { selectMerchant } from \"@redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModuleLine = /*#__PURE__*/memo(_c = _s(props => {\n  _s();\n\n  //props\n  const {\n    state\n  } = props; //redux page\n\n  const {\n    lineIntegration\n  } = useSelector(selectMerchant);\n  const handleLineLogin = useCallback(() => {\n    var _lineIntegration$line;\n\n    // Build query string.\n    console.log(liff);\n    liff.init({\n      liffId: \"123456-abcedfg\" // Use own liffId\n\n    }).then(() => {// Start to use liff's api\n    }).catch(err => {\n      // Error happens during initialization\n      console.log(err.code, err.message);\n    });\n    const query = querystring.stringify({\n      response_type: \"code\",\n      client_id: (lineIntegration === null || lineIntegration === void 0 ? void 0 : (_lineIntegration$line = lineIntegration.lineLoginApi) === null || _lineIntegration$line === void 0 ? void 0 : _lineIntegration$line.channelID) || \"\",\n      state: JSON.stringify(state),\n      redirect_uri: `${process.env.REACT_APP_WEB_URL}${PATH_LINE_LOGIN}`\n    });\n    liff.login({\n      redirectUri: `https://localhost:3000/sign-in`\n    }); // Build the Line authorize URL.\n\n    const lineUrl = `${LINE_ACCESS_URL}/authorize?scope=${LINE_SCOPE}&${query}`; // window.location.href = lineUrl;\n    // Redirect to external URL.\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ComponentLineButton, {\n    onClick: handleLineLogin\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 12\n  }, this);\n}, \"9PoyX2yxV4DoKyMjimOImpoodcE=\", false, function () {\n  return [useSelector];\n}));\n_c2 = ModuleLine;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ModuleLine$memo\");\n$RefreshReg$(_c2, \"ModuleLine\");","map":{"version":3,"sources":["/home/vuxuantu/Desktop/rewarding-platform-client/src/Modules/authentication/Line.tsx"],"names":["querystring","memo","useCallback","useSelector","liff","ComponentLineButton","LINE_ACCESS_URL","LINE_SCOPE","PATH_LINE_LOGIN","selectMerchant","ModuleLine","props","state","lineIntegration","handleLineLogin","console","log","init","liffId","then","catch","err","code","message","query","stringify","response_type","client_id","lineLoginApi","channelID","JSON","redirect_uri","process","env","REACT_APP_WEB_URL","login","redirectUri","lineUrl"],"mappings":";;;AAAA,OAAOA,WAAP,MAAwB,aAAxB;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,OAAlC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,IAAP,MAAiB,YAAjB;AAEA,SAASC,mBAAT,QAAoC,aAApC;AACA,SAASC,eAAT,EAA0BC,UAA1B,EAAsCC,eAAtC,QAA6D,UAA7D;AAEA,SAASC,cAAT,QAA+B,QAA/B;;AAMA,OAAO,MAAMC,UAAU,gBAAGT,IAAI,SAAEU,KAAD,IAAmB;AAAA;;AAC9C;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAYD,KAAlB,CAF8C,CAG9C;;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAsBV,WAAW,CAACM,cAAD,CAAvC;AAEA,QAAMK,eAAe,GAAGZ,WAAW,CAAC,MAAM;AAAA;;AACtC;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ;AACAA,IAAAA,IAAI,CAACa,IAAL,CAAU;AACNC,MAAAA,MAAM,EAAE,gBADF,CACoB;;AADpB,KAAV,EAGKC,IAHL,CAGU,MAAM,CACR;AACH,KALL,EAMKC,KANL,CAMYC,GAAD,IAAS;AACZ;AACAN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAG,CAACC,IAAhB,EAAsBD,GAAG,CAACE,OAA1B;AACH,KATL;AAWA,UAAMC,KAAK,GAAGxB,WAAW,CAACyB,SAAZ,CAAsB;AAChCC,MAAAA,aAAa,EAAE,MADiB;AAEhCC,MAAAA,SAAS,EAAE,CAAAd,eAAe,SAAf,IAAAA,eAAe,WAAf,qCAAAA,eAAe,CAAEe,YAAjB,gFAA+BC,SAA/B,KAA4C,EAFvB;AAGhCjB,MAAAA,KAAK,EAAEkB,IAAI,CAACL,SAAL,CAAeb,KAAf,CAHyB;AAIhCmB,MAAAA,YAAY,EAAG,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,GAAE1B,eAAgB;AAJjC,KAAtB,CAAd;AAMAJ,IAAAA,IAAI,CAAC+B,KAAL,CAAW;AACPC,MAAAA,WAAW,EAAG;AADP,KAAX,EApBsC,CAuBtC;;AACA,UAAMC,OAAO,GAAI,GAAE/B,eAAgB,oBAAmBC,UAAW,IAAGiB,KAAM,EAA1E,CAxBsC,CA0BtC;AACA;AACH,GA5BkC,EA4BhC,EA5BgC,CAAnC;AA8BA,sBAAO,QAAC,mBAAD;AAAqB,IAAA,OAAO,EAAEV;AAA9B;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CArC6B;AAAA,UAIEX,WAJF;AAAA,GAAvB;MAAMO,U","sourcesContent":["import querystring from \"querystring\";\nimport { memo, useCallback } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport liff from \"@line/liff\";\n\nimport { ComponentLineButton } from \"@components\";\nimport { LINE_ACCESS_URL, LINE_SCOPE, PATH_LINE_LOGIN } from \"@configs\";\nimport { IExternalAuthState } from \"@interfaces\";\nimport { selectMerchant } from \"@redux\";\n\ninterface IProps {\n    state: IExternalAuthState;\n}\n\nexport const ModuleLine = memo((props: IProps) => {\n    //props\n    const { state } = props;\n    //redux page\n    const { lineIntegration } = useSelector(selectMerchant);\n\n    const handleLineLogin = useCallback(() => {\n        // Build query string.\n        console.log(liff);\n        liff.init({\n            liffId: \"123456-abcedfg\", // Use own liffId\n        })\n            .then(() => {\n                // Start to use liff's api\n            })\n            .catch((err) => {\n                // Error happens during initialization\n                console.log(err.code, err.message);\n            });\n\n        const query = querystring.stringify({\n            response_type: \"code\",\n            client_id: lineIntegration?.lineLoginApi?.channelID || \"\",\n            state: JSON.stringify(state),\n            redirect_uri: `${process.env.REACT_APP_WEB_URL}${PATH_LINE_LOGIN}`,\n        });\n        liff.login({\n            redirectUri: `https://localhost:3000/sign-in`,\n        });\n        // Build the Line authorize URL.\n        const lineUrl = `${LINE_ACCESS_URL}/authorize?scope=${LINE_SCOPE}&${query}`;\n\n        // window.location.href = lineUrl;\n        // Redirect to external URL.\n    }, []);\n\n    return <ComponentLineButton onClick={handleLineLogin} />;\n});\n"]},"metadata":{},"sourceType":"module"}